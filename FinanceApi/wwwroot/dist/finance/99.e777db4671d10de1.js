"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[99],{99:(z,g,l)=>{l.r(g),l.d(g,{CustomerModule:()=>E});var m=l(6895),p=l(4333),r=l(433),U=l(529),A=l(3144),q=l(5839),I=l(5593),x=l(1740),d=l(9965),h=l(805),t=l(8256),C=l(2947),Z=l(8889),f=l(2137),v=l(3887);function _(n,s){if(1&n){const u=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(u);const e=t.oxw();return t.KtG(e.clearField("searchCustomerName"))}),t.qZA()}}function b(n,s){if(1&n){const u=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td",20)(30,"i",21),t.NdJ("click",function(){const i=t.CHM(u).$implicit,a=t.oxw();return t.KtG(a.editcustomer(i))}),t.qZA(),t.TgZ(31,"i",22),t.NdJ("click",function(){const i=t.CHM(u).$implicit,a=t.oxw();return t.KtG(a.confirmdeleteCustomer(i))}),t.qZA()()()}if(2&n){const u=s.$implicit,o=s.index,e=t.oxw();t.xp6(2),t.Oqu((e.page-1)*e.itemsPerPage+o+1),t.xp6(2),t.Oqu(u.name),t.xp6(2),t.Oqu(u.contactName),t.xp6(2),t.Oqu(u.countryName),t.xp6(2),t.Oqu(u.stateName),t.xp6(2),t.Oqu(u.cityName),t.xp6(2),t.Oqu(u.address),t.xp6(2),t.Oqu(u.regionName),t.xp6(2),t.Oqu(u.customerGroupName),t.xp6(2),t.Oqu(u.postalCode),t.xp6(2),t.Oqu(u.phone),t.xp6(2),t.Oqu(u.website),t.xp6(2),t.Oqu(u.fax),t.xp6(2),t.Oqu(u.email)}}const N=function(n,s){return{itemsPerPage:n,currentPage:s}};let L=(()=>{const s=class{constructor(o,e,i,a,c){this.formBuilder=o,this.router=e,this.customerService=i,this.toast=a,this.confirmationService=c,this.customerList=[],this.page=1,this.itemsPerPage=10,this.searchCustomerName=""}ngOnInit(){this.headervalue="Customers",this.customerService.getCustomer().subscribe(o=>{this.customerList=o})}createCustomer(){this.router.navigateByUrl("bp/customer/create")}editcustomer(o){this.router.navigateByUrl(`bp/customer/edit/${o.id}`)}deleteCustomer(o){this.customerService.deleteCustomer(o.id).subscribe(e=>{this.toast.showSuccess("Customer Details deleted successfully"),this.ngOnInit()})}filterCustomers(){this.customerService.getCustomer().subscribe(o=>{this.filteredList=o,this.searchCustomerName&&(this.filteredList=this.filteredList?.filter(e=>!this.searchCustomerName||e.name.toLowerCase().includes(this.searchCustomerName.toLowerCase()))),this.customerList=this.filteredList,this.page=1})}clearField(o){"searchCustomerName"===o&&(this.searchCustomerName=""),this.filterCustomers()}confirmdeleteCustomer(o){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteCustomer(o)},reject:()=>{}})}};let n=s;return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(d.F0),t.Y36(C.v),t.Y36(Z.k),t.Y36(h.YP))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-customer-list"]],features:[t._Bn([h.YP,h.ez])],decls:59,vars:10,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Customer","readonly","",2,"width","150px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[2,"max-width","100%","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[2,"padding-left","20px"],[1,"fas","fa-pen",2,"color","#05a743","margin-right","15px","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h5",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"i",5),t.TgZ(7,"input",6),t.NdJ("ngModelChange",function(c){return i.searchCustomerName=c})("input",function(){return i.filterCustomers()}),t.qZA(),t.YNc(8,_,1,0,"i",7),t.qZA(),t.TgZ(9,"div",8),t._UZ(10,"i",9),t.TgZ(11,"input",10),t.NdJ("click",function(){return i.createCustomer()}),t.qZA()(),t.TgZ(12,"div",11),t._UZ(13,"i",12)(14,"input",13),t.qZA(),t.TgZ(15,"div",11),t._UZ(16,"i",14)(17,"input",13),t.qZA()()(),t.TgZ(18,"div",15)(19,"table")(20,"thead")(21,"tr")(22,"th"),t._uU(23,"ID"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Customer Name"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Contact Name"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Country Name"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"State Name"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"City Name"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Address"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Region"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Customer Group"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Postal Code"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Phone"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Website"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Fax"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Email"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Action"),t.qZA()()(),t.TgZ(52,"tbody"),t.YNc(53,b,32,14,"tr",16),t.ALo(54,"paginate"),t.qZA()()(),t.TgZ(55,"div",17)(56,"pagination-controls",18),t.NdJ("pageChange",function(c){return i.page=c}),t.qZA()()(),t._UZ(57,"p-confirmDialog")(58,"p-toast")),2&e&&(t.xp6(1),t.Oqu(i.headervalue),t.xp6(6),t.Q6J("ngModel",i.searchCustomerName),t.xp6(1),t.Q6J("ngIf",i.searchCustomerName),t.xp6(45),t.Q6J("ngForOf",t.xi3(54,4,i.customerList,t.WLB(7,N,i.itemsPerPage,i.page))))},dependencies:[m.sg,m.O5,r.Fj,r.JJ,r.On,p.LS,f.Q,v.FN,p._s]}),n})();var w=l(6625),S=l(2669),F=l(8102),J=l(3695),k=l(5595),y=l(4401);function O(n,s){1&n&&(t.TgZ(0,"small"),t._uU(1,"Enter a valid email."),t.qZA())}function Y(n,s){if(1&n&&(t.TgZ(0,"div",31),t.YNc(1,O,2,0,"small",32),t.qZA()),2&n){const u=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=u.addForm.get("email"))||null==o.errors?null:o.errors.email)}}let T=(()=>{const s=class{constructor(o,e,i,a,c,M,Q,V,D,j){this.fb=o,this.router=e,this.stateService=i,this.toast=a,this.route=c,this.countryService=M,this.customerService=Q,this.cityService=V,this.customerGroupsService=D,this.regionService=j,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1}ngOnInit(){this.addForm=this.fb.group({name:[null,r.kI.required],contactName:[null],countryId:[null,r.kI.required],stateId:[null,r.kI.required],cityId:[null,r.kI.required],customerGroupId:[null,r.kI.required],address:[null],regionId:[null,r.kI.required],postalCode:[null],phone:[null,r.kI.required],website:[null],fax:[null],email:[null]}),this.getCountry(),this.getState(),this.getCity(),this.getCustomerGroup(),this.getRegion(),this.route.paramMap.subscribe(o=>{this.customerId=parseInt(o.get("id")),this.customerId?(this.isEditMode=!0,this.customerService.getCustomerById(this.customerId).subscribe(e=>{this.addForm=this.fb.group({name:[e.name,r.kI.required],contactName:[e.contactName],countryId:[e.countryId,r.kI.required],stateId:[e.stateId,r.kI.required],cityId:[e.cityId,r.kI.required],customerGroupId:[e.customerGroupId,r.kI.required],address:[e.address],regionId:[e.regionId,r.kI.required],postalCode:[e.postalCode],phone:[e.phone,r.kI.required],website:[e.website],fax:[e.fax],email:[e.email]}),this.onCountryChange({value:e.countryId,stateId:e.stateId},!0),this.onStateChange({value:e.stateId,cityId:e.cityId},!0)})):this.isEditMode=!1})}getCountry(){this.countryService.getCountry().subscribe(o=>{this.countryList=o})}getState(){this.stateService.getState().subscribe(o=>{this.stateList=o})}getCity(){this.cityService.getCity().subscribe(o=>{this.cityList=o})}getCustomerGroup(){this.customerGroupsService.getCustomerGroups().subscribe(o=>{this.customerGroupsList=o})}getRegion(){this.regionService.getRegion().subscribe(o=>{this.regionList=o})}onCountryChange(o,e=!1){if(this.cityUpdatedList=[],this.stateUpdatedList=this.stateList?.filter(i=>i.countryId===o.value),e){const i=this.stateUpdatedList?.find(a=>a.stateId===o.stateId);this.addForm.patchValue({stateId:i?.stateId})}else this.addForm.patchValue({stateId:null,cityId:null})}onStateChange(o,e=!1){if(this.cityUpdatedList=this.cityList?.filter(i=>i.stateId===o.value),e){const i=this.cityUpdatedList?.find(a=>a.cityId===o.cityId);this.addForm.patchValue({cityId:i?.cityId})}else this.addForm.patchValue({cityId:null})}onSubmit(){const o=this.addForm.getRawValue();this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):this.isEditMode?this.customerService.updateCustomer(Number(this.customerId),o).subscribe(e=>{this.toast.showSuccess("Customer Details updated successfully"),this.router.navigateByUrl("bp/customer")},e=>{this.toast.showApiError(e)}):this.customerService.insertCustomer(o).subscribe(e=>{this.toast.showSuccess("Customer Details saved successfully"),this.router.navigateByUrl("bp/customer")},e=>{this.toast.showApiError(e)})}allowOnlyNumbers(o){/[0-9.]/.test(o.key)||o.preventDefault()}backButton(){this.router.navigateByUrl("bp/customer")}cancel(){this.router.navigateByUrl("bp/customer")}};let n=s;return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(d.F0),t.Y36(w.b),t.Y36(Z.k),t.Y36(d.gz),t.Y36(S.T),t.Y36(C.v),t.Y36(F.Z),t.Y36(J.f),t.Y36(k.o))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-customer-create"]],decls:104,vars:13,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container","d-flex","flex-column",2,"min-height","100%",3,"formGroup"],[1,"flex-grow-1"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],["type","text","formControlName","name",1,"form-control","small-placeholder"],["type","text","formControlName","contactName",1,"form-control","small-placeholder"],[1,"row","mt-3"],[1,"w-100"],["optionLabel","countryName","optionValue","id","formControlName","countryId","placeholder","choose country","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],["optionLabel","stateName","optionValue","stateId","formControlName","stateId","placeholder","choose state","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],["optionLabel","cityName","optionValue","cityId","formControlName","cityId","placeholder","choose city","styleClass","w-100","appendTo","body",3,"options","showClear"],["optionLabel","name","optionValue","id","formControlName","customerGroupId","placeholder","choose customer Group","styleClass","w-100","appendTo","body",3,"options","showClear"],[1,"col-sm-12"],["type","text","formControlName","address",1,"form-control","small-placeholder"],["optionLabel","regionName","optionValue","id","formControlName","regionId","placeholder","choose region","styleClass","w-100","appendTo","body",3,"options","showClear"],["type","text","formControlName","postalCode",1,"form-control","small-placeholder"],["type","text","formControlName","phone",1,"form-control","small-placeholder",3,"keypress"],["type","text","formControlName","website",1,"form-control","small-placeholder"],["type","text","formControlName","fax",1,"form-control","small-placeholder"],["type","text","formControlName","email",1,"form-control","small-placeholder"],["class","text-danger text-end  mt-1","style","margin-left: 2px;",4,"ngIf"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"],[1,"text-danger","text-end","mt-1",2,"margin-left","2px"],[4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h5",0)(1,"i",1),t.NdJ("click",function(){return i.backButton()}),t.qZA(),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Name "),t.TgZ(12,"span",10),t._uU(13,"*"),t.qZA()(),t._UZ(14,"input",11),t.qZA()(),t.TgZ(15,"div",7)(16,"div",8)(17,"label",9),t._uU(18,"Contact Name"),t.qZA(),t._UZ(19,"input",12),t.qZA()()(),t.TgZ(20,"div",13)(21,"div",7)(22,"div",8)(23,"label",9),t._uU(24,"Country"),t.TgZ(25,"span",10),t._uU(26,"*"),t.qZA()(),t.TgZ(27,"div",14)(28,"p-dropdown",15),t.NdJ("onChange",function(c){return i.onCountryChange(c)}),t.qZA()()()(),t.TgZ(29,"div",7)(30,"div",8)(31,"label",9),t._uU(32,"State"),t.TgZ(33,"span",10),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"div",14)(36,"p-dropdown",16),t.NdJ("onChange",function(c){return i.onStateChange(c)}),t.qZA()()()()(),t.TgZ(37,"div",13)(38,"div",7)(39,"div",8)(40,"label",9),t._uU(41,"City"),t.TgZ(42,"span",10),t._uU(43,"*"),t.qZA()(),t.TgZ(44,"div",14),t._UZ(45,"p-dropdown",17),t.qZA()()(),t.TgZ(46,"div",7)(47,"div",8)(48,"label",9),t._uU(49,"Customer Group"),t.TgZ(50,"span",10),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"div",14),t._UZ(53,"p-dropdown",18),t.qZA()()()(),t.TgZ(54,"div",13)(55,"div",19)(56,"div",8)(57,"label",9),t._uU(58,"Address"),t.qZA(),t._UZ(59,"textarea",20),t.qZA()()(),t.TgZ(60,"div",13)(61,"div",7)(62,"div",8)(63,"label",9),t._uU(64,"Region"),t.TgZ(65,"span",10),t._uU(66,"*"),t.qZA()(),t.TgZ(67,"div",14),t._UZ(68,"p-dropdown",21),t.qZA()()(),t.TgZ(69,"div",7)(70,"div",8)(71,"label",9),t._uU(72,"Postal Code"),t.qZA(),t._UZ(73,"input",22),t.qZA()()(),t.TgZ(74,"div",13)(75,"div",7)(76,"div",8)(77,"label",9),t._uU(78,"Phone "),t.TgZ(79,"span",10),t._uU(80,"*"),t.qZA()(),t.TgZ(81,"input",23),t.NdJ("keypress",function(c){return i.allowOnlyNumbers(c)}),t.qZA()()(),t.TgZ(82,"div",7)(83,"div",8)(84,"label",9),t._uU(85,"Website"),t.qZA(),t._UZ(86,"input",24),t.qZA()()(),t.TgZ(87,"div",13)(88,"div",7)(89,"div",8)(90,"label",9),t._uU(91,"Fax"),t.qZA(),t._UZ(92,"input",25),t.qZA()(),t.TgZ(93,"div",7)(94,"div",8)(95,"label",9),t._uU(96,"Email"),t.qZA(),t._UZ(97,"input",26),t.qZA(),t.YNc(98,Y,2,1,"div",27),t.qZA()()()(),t.TgZ(99,"div",28)(100,"button",29),t.NdJ("click",function(){return i.cancel()}),t._uU(101,"Cancel"),t.qZA(),t.TgZ(102,"button",30),t.NdJ("click",function(){return i.onSubmit()}),t._uU(103,"Save"),t.qZA()()()()),2&e){let a;t.xp6(2),t.hij(" ",i.isEditMode?"Edit Customers":"New Customers","\n"),t.xp6(2),t.Q6J("formGroup",i.addForm),t.xp6(24),t.Q6J("options",i.countryList)("showClear",!0),t.xp6(8),t.Q6J("options",i.stateUpdatedList)("showClear",!0),t.xp6(9),t.Q6J("options",i.cityUpdatedList)("showClear",!0),t.xp6(8),t.Q6J("options",i.customerGroupsList)("showClear",!0),t.xp6(15),t.Q6J("options",i.regionList)("showClear",!0),t.xp6(30),t.Q6J("ngIf",(null==(a=i.addForm.get("email"))?null:a.invalid)&&(null==(a=i.addForm.get("email"))?null:a.touched))}},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,y.Lt]}),n})();const G=[{path:"",component:L},{path:"create",component:T},{path:"edit/:id",component:T}];let B=(()=>{const s=class{};let n=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.Bz.forChild(G),d.Bz]}),n})();var P=l(2688);let E=(()=>{const s=class{};let n=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[m.ez,B,r.UX,r.u5,U.JF,p.JX,A.U$,q.S,I.hJ,x.j,y.kW,P._8,f.D,v.EV]}),n})()}}]);