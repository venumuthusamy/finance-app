"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[756],{6756:(D,g,s)=>{s.r(g),s.d(g,{LocationModule:()=>O});var h=s(6895),p=s(4333),c=s(433),f=s(529),U=s(3144),A=s(5839),I=s(5593),N=s(1740),Z=s(4401),b=s(2688),y=s(2137),L=s(3887),u=s(9965),m=s(805),t=s(8256),x=s(2340);let v=(()=>{const o=class{constructor(e){this.http=e,this.url=x.N.apiUrl,this.baseUrl=this.url+"/location/"}getLocation(){return this.http.get(this.baseUrl+"getAll")}getLocationById(e){return this.http.get(this.baseUrl+"get/"+e)}insertLocation(e){return this.http.post(`${this.baseUrl}insert`,e)}updateLocation(e,i){return this.http.put(this.baseUrl+"update/"+e,i)}deleteLocation(e){return this.http.delete(`${this.baseUrl}delete/`+e)}};let a=o;return o.\u0275fac=function(i){return new(i||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var C=s(8889);function q(a,o){if(1&a){const l=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(l);const i=t.oxw();return t.KtG(i.clearField("searchLocationName"))}),t.qZA()}}function S(a,o){if(1&a){const l=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td",20)(18,"i",21),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.editLocation(n))}),t.qZA(),t.TgZ(19,"i",22),t.NdJ("click",function(){const n=t.CHM(l).$implicit,r=t.oxw();return t.KtG(r.confirmdeleteLocation(n))}),t.qZA()()()}if(2&a){const l=o.$implicit,e=o.index,i=t.oxw();t.xp6(2),t.Oqu((i.page-1)*i.itemsPerPage+e+1),t.xp6(2),t.Oqu(l.name),t.xp6(2),t.Oqu(l.countryName),t.xp6(2),t.Oqu(l.stateName),t.xp6(2),t.Oqu(l.cityName),t.xp6(2),t.Oqu(l.address),t.xp6(2),t.Oqu(l.latitude),t.xp6(2),t.Oqu(l.longitude)}}const w=function(a,o){return{itemsPerPage:a,currentPage:o}};let F=(()=>{const o=class{constructor(e,i,n,r,d){this.formBuilder=e,this.router=i,this.locationService=n,this.toast=r,this.confirmationService=d,this.locationList=[],this.page=1,this.itemsPerPage=10,this.searchLocationName=""}ngOnInit(){this.headervalue="Locations",this.locationService.getLocation().subscribe(e=>{this.locationList=e})}createLocation(){this.router.navigateByUrl("masters/locations/create")}editLocation(e){this.router.navigateByUrl(`masters/locations/edit/${e.id}`)}deleteLocation(e){this.locationService.deleteLocation(e.id).subscribe(i=>{this.toast.showSuccess("Locations Details deleted successfully"),this.ngOnInit()})}filterLocation(){this.locationService.getLocation().subscribe(e=>{this.filteredList=e,this.searchLocationName&&(this.filteredList=this.filteredList?.filter(i=>!this.searchLocationName||i.name.toLowerCase().includes(this.searchLocationName.toLowerCase()))),this.locationList=this.filteredList,this.page=1})}clearField(e){"searchLocationName"===e&&(this.searchLocationName=""),this.filterLocation()}confirmdeleteLocation(e){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteLocation(e)},reject:()=>{}})}};let a=o;return o.\u0275fac=function(i){return new(i||o)(t.Y36(c.qu),t.Y36(u.F0),t.Y36(v),t.Y36(C.k),t.Y36(m.YP))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location-list"]],features:[t._Bn([m.YP,m.ez])],decls:47,vars:10,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Location","readonly","",2,"width","150px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[2,"max-width","100%","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[2,"padding-left","20px"],[1,"fas","fa-pen",2,"color","#05a743","margin-right","15px","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"h5",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"i",5),t.TgZ(7,"input",6),t.NdJ("ngModelChange",function(d){return n.searchLocationName=d})("input",function(){return n.filterLocation()}),t.qZA(),t.YNc(8,q,1,0,"i",7),t.qZA(),t.TgZ(9,"div",8),t._UZ(10,"i",9),t.TgZ(11,"input",10),t.NdJ("click",function(){return n.createLocation()}),t.qZA()(),t.TgZ(12,"div",11),t._UZ(13,"i",12)(14,"input",13),t.qZA(),t.TgZ(15,"div",11),t._UZ(16,"i",14)(17,"input",13),t.qZA()()(),t.TgZ(18,"div",15)(19,"table")(20,"thead")(21,"tr")(22,"th"),t._uU(23,"ID"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Location Name"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Country Name"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"State Name"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"City Name"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Address"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Latitude"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Longitude"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Action"),t.qZA()()(),t.TgZ(40,"tbody"),t.YNc(41,S,20,8,"tr",16),t.ALo(42,"paginate"),t.qZA()()(),t.TgZ(43,"div",17)(44,"pagination-controls",18),t.NdJ("pageChange",function(d){return n.page=d}),t.qZA()()(),t._UZ(45,"p-confirmDialog")(46,"p-toast")),2&i&&(t.xp6(1),t.Oqu(n.headervalue),t.xp6(6),t.Q6J("ngModel",n.searchLocationName),t.xp6(1),t.Q6J("ngIf",n.searchLocationName),t.xp6(33),t.Q6J("ngForOf",t.xi3(42,4,n.locationList,t.WLB(7,w,n.itemsPerPage,n.page))))},dependencies:[h.sg,h.O5,c.Fj,c.JJ,c.On,p.LS,y.Q,L.FN,p._s]}),a})();var J=s(6625),_=s(2669),Y=s(8102);let T=(()=>{const o=class{constructor(e,i,n,r,d,M,P,E){this.fb=e,this.router=i,this.stateService=n,this.toast=r,this.route=d,this.countryService=M,this.locationService=P,this.cityService=E,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1}ngOnInit(){this.addForm=this.fb.group({name:[null,c.kI.required],countryId:[null,c.kI.required],stateId:[null,c.kI.required],cityId:[null,c.kI.required],address:[null],latitude:[null],longitude:[null]}),this.getCountry(),this.getState(),this.getCity(),this.route.paramMap.subscribe(e=>{this.locationId=parseInt(e.get("id")),this.locationId?(this.isEditMode=!0,this.locationService.getLocationById(this.locationId).subscribe(i=>{this.addForm=this.fb.group({name:[i.name,c.kI.required],countryId:[i.countryId],stateId:[i.stateId],cityId:[i.cityId],address:[i.address],latitude:[i.latitude],longitude:[i.longitude]}),this.onCountryChange({value:i.countryId,stateId:i.stateId},!0),this.onStateChange({value:i.stateId,cityId:i.cityId},!0)})):this.isEditMode=!1})}getCountry(){this.countryService.getCountry().subscribe(e=>{this.countryList=e})}getState(){this.stateService.getState().subscribe(e=>{this.stateList=e})}getCity(){this.cityService.getCity().subscribe(e=>{this.cityList=e})}onCountryChange(e,i=!1){if(this.cityUpdatedList=[],this.stateUpdatedList=this.stateList?.filter(n=>n.countryId===e.value),i){const n=this.stateUpdatedList?.find(r=>r.stateId===e.stateId);this.addForm.patchValue({stateId:n?.stateId})}else this.addForm.patchValue({stateId:null,cityId:null})}onStateChange(e,i=!1){if(this.cityUpdatedList=this.cityList?.filter(n=>n.stateId===e.value),i){const n=this.cityUpdatedList?.find(r=>r.cityId===e.cityId);this.addForm.patchValue({cityId:n?.cityId})}else this.addForm.patchValue({cityId:null})}onSubmit(){const e=this.addForm.getRawValue();this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):this.isEditMode?this.locationService.updateLocation(Number(this.locationId),e).subscribe(i=>{this.toast.showSuccess("Location Details updated successfully"),this.router.navigateByUrl("masters/locations")},i=>{this.toast.showApiError(i)}):this.locationService.insertLocation(e).subscribe(i=>{this.toast.showSuccess("Location Details saved successfully"),this.router.navigateByUrl("masters/locations")},i=>{this.toast.showApiError(i)})}allowOnlyNumbers(e){/[0-9.]/.test(e.key)||e.preventDefault()}backButton(){this.router.navigateByUrl("masters/locations")}cancel(){this.router.navigateByUrl("masters/locations")}};let a=o;return o.\u0275fac=function(i){return new(i||o)(t.Y36(c.qu),t.Y36(u.F0),t.Y36(J.b),t.Y36(C.k),t.Y36(u.gz),t.Y36(_.T),t.Y36(v),t.Y36(Y.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location-create"]],decls:62,vars:8,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container","d-flex","flex-column",2,"min-height","100%",3,"formGroup"],[1,"flex-grow-1"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],["type","text","formControlName","name",1,"form-control","small-placeholder"],[1,"w-100"],["optionLabel","countryName","optionValue","id","formControlName","countryId","placeholder","choose country","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],[1,"row","mt-3"],["optionLabel","stateName","optionValue","stateId","formControlName","stateId","placeholder","choose state","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],["optionLabel","cityName","optionValue","cityId","formControlName","cityId","placeholder","choose city","styleClass","w-100","appendTo","body",3,"options","showClear"],[1,"col-sm-12"],["type","text","formControlName","address",1,"form-control","small-placeholder"],["type","text","formControlName","latitude",1,"form-control","small-placeholder"],["type","text","formControlName","longitude",1,"form-control","small-placeholder"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"h5",0)(1,"i",1),t.NdJ("click",function(){return n.backButton()}),t.qZA(),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Location Name "),t.TgZ(12,"span",10),t._uU(13,"*"),t.qZA()(),t._UZ(14,"input",11),t.qZA()(),t.TgZ(15,"div",7)(16,"div",8)(17,"label",9),t._uU(18,"Country"),t.TgZ(19,"span",10),t._uU(20,"*"),t.qZA()(),t.TgZ(21,"div",12)(22,"p-dropdown",13),t.NdJ("onChange",function(d){return n.onCountryChange(d)}),t.qZA()()()()(),t.TgZ(23,"div",14)(24,"div",7)(25,"div",8)(26,"label",9),t._uU(27,"State"),t.TgZ(28,"span",10),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"div",12)(31,"p-dropdown",15),t.NdJ("onChange",function(d){return n.onStateChange(d)}),t.qZA()()()(),t.TgZ(32,"div",7)(33,"div",8)(34,"label",9),t._uU(35,"City"),t.TgZ(36,"span",10),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"div",12),t._UZ(39,"p-dropdown",16),t.qZA()()()(),t.TgZ(40,"div",14)(41,"div",17)(42,"div",8)(43,"label",9),t._uU(44,"Address"),t.qZA(),t._UZ(45,"textarea",18),t.qZA()()(),t.TgZ(46,"div",14)(47,"div",7)(48,"div",8)(49,"label",9),t._uU(50,"Latitude"),t.qZA(),t._UZ(51,"input",19),t.qZA()(),t.TgZ(52,"div",7)(53,"div",8)(54,"label",9),t._uU(55,"Longitude"),t.qZA(),t._UZ(56,"input",20),t.qZA()()()()(),t.TgZ(57,"div",21)(58,"button",22),t.NdJ("click",function(){return n.cancel()}),t._uU(59,"Cancel"),t.qZA(),t.TgZ(60,"button",23),t.NdJ("click",function(){return n.onSubmit()}),t._uU(61,"Save"),t.qZA()()()()),2&i&&(t.xp6(2),t.hij(" ",n.isEditMode?"Edit Locations":"New Locations","\n"),t.xp6(2),t.Q6J("formGroup",n.addForm),t.xp6(18),t.Q6J("options",n.countryList)("showClear",!0),t.xp6(9),t.Q6J("options",n.stateUpdatedList)("showClear",!0),t.xp6(8),t.Q6J("options",n.cityUpdatedList)("showClear",!0))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z.Lt]}),a})();const k=[{path:"",component:F},{path:"create",component:T},{path:"edit/:id",component:T}];let B=(()=>{const o=class{};let a=o;return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(k),u.Bz]}),a})(),O=(()=>{const o=class{};let a=o;return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,B,c.UX,c.u5,f.JF,p.JX,U.U$,A.S,I.hJ,N.j,Z.kW,b._8,y.D,L.EV]}),a})()}}]);