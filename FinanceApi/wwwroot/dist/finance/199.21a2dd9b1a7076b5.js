"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[199],{199:(it,A,c)=>{c.r(A),c.d(A,{SalesInnerModule:()=>tt});var g=c(6895),f=c(9965),b=c(574),P=c(4327),O=c(7822),M=c(3373),h=c(805),t=c(8256),o=c(433),E=c(828),C=c(529);let q=(()=>{const s=class{constructor(e){this.http=e,this.storedData=null,this.baseUrl=E.N.apiUrl+"/sale/"}setData(e){this.storedData=e}getData(){return this.storedData}getSales(){return this.http.get(this.baseUrl+"getAll")}getSalesById(e){return this.http.get(this.baseUrl+"get/"+e)}insertSales(e){return this.http.post(`${this.baseUrl}insert`,e)}updateSales(e,i){return this.http.put(this.baseUrl+"update/"+e,i)}deleteSales(e){return this.http.delete(`${this.baseUrl}delete/`+e)}};let l=s;return s.\u0275fac=function(i){return new(i||s)(t.LFG(C.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),l})();var y=c(8889),T=c(4333),U=c(2137),x=c(3887);function V(l,s){if(1&l){const r=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.clearField("searchCustomerName"))}),t.qZA()}}function B(l,s){if(1&l){const r=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td")(33,"i",24),t.NdJ("click",function(){const n=t.CHM(r).$implicit,a=t.oxw();return t.KtG(a.editSales(n))}),t.qZA(),t.TgZ(34,"i",25),t.NdJ("click",function(){const n=t.CHM(r).$implicit,a=t.oxw();return t.KtG(a.confirmdeleteSales(n))}),t.qZA()()()}if(2&l){const r=s.$implicit,e=s.index,i=t.oxw();t.xp6(2),t.Oqu((i.page-1)*i.itemsPerPage+e+1),t.xp6(2),t.Oqu(r.customerName),t.xp6(2),t.Oqu(t.xi3(7,15,r.date,"dd-MM-yyyy")),t.xp6(3),t.Oqu(r.paymentAccount),t.xp6(2),t.Oqu(r.grandTotal),t.xp6(2),t.Oqu(r.discount),t.xp6(2),t.Oqu(r.totalDiscount),t.xp6(2),t.Oqu(r.gst),t.xp6(2),t.Oqu(r.totalTax),t.xp6(2),t.Oqu(r.shippingCost),t.xp6(2),t.Oqu(r.netTotal),t.xp6(2),t.Oqu(r.paidAmount),t.xp6(2),t.Oqu(r.due),t.xp6(2),t.Oqu(r.change),t.xp6(2),t.Oqu(r.details)}}const G=function(l,s){return{itemsPerPage:l,currentPage:s}};let Y=(()=>{const s=class{constructor(e,i,n,a,u,d){this.formBuilder=e,this.router=i,this.salesInnerService=n,this.toast=a,this.confirmationService=u,this.messageService=d,this.salesList=[],this.page=1,this.itemsPerPage=10,this.searchCustomerName="",this.formatDate=p=>{const m=new Date(p);return`${String(m.getDate()).padStart(2,"0")}-${String(m.getMonth()+1).padStart(2,"0")}-${m.getFullYear()}`}}ngOnInit(){this.headervalue="Sales",this.salesInnerService.getSales().subscribe(e=>{const i=e||"{}";i?(this.salesList=i,this.salesInnerService.setData(this.salesList)):this.salesList=i})}createSales(){this.router.navigateByUrl("sales/sales/create")}editSales(e){this.router.navigateByUrl(`sales/sales/edit/${e.id}`)}deleteSales(e){this.salesInnerService.deleteSales(e.id).subscribe(i=>{this.ngOnInit(),this.toast.showSuccess("Sales Deleted Successfully")})}filterSales(){this.salesInnerService.getSales().subscribe(e=>{this.filteredList=e,this.searchCustomerName&&(this.filteredList=this.filteredList.filter(i=>!this.searchCustomerName||i.customerName.toLowerCase().includes(this.searchCustomerName.toLowerCase()))),this.salesList=this.filteredList,this.page=1})}clearField(e){"searchCustomerName"===e&&(this.searchCustomerName=""),this.filterSales()}downloadExcel(){const e=this.salesList.map(d=>({ID:d.id,"Customer Name":d.customerName,Date:this.formatDate(d.date),"Payment Account":d.paymentAccount,"Grand Total":d.grandTotal,"Discount(%)":d.discount,"Total Discount":d.totalDiscount,"GST Amount":d.gst,"Total Tax":d.totalTax,"Shipping Cost":d.shippingCost,"Net Total":d.netTotal,"Paid Amount":d.paidAmount,Due:d.due,Change:d.change,Details:d.details})),n={Sheets:{"Sales Data":b.P6.json_to_sheet(e)},SheetNames:["Sales Data"]},a=b.cW(n,{bookType:"xlsx",type:"array"}),u=new Blob([a],{type:"application/octet-stream"});P.saveAs(u,"SalesData.xlsx")}downloadPDF(){const e=new O.ZP("l"),n=this.salesList.map(a=>[a.id,a.customerName,this.formatDate(a.date),a.paymentAccount,a.grandTotal,a.discount,a.totalDiscount,a.gst,a.totalTax,a.shippingCost,a.netTotal,a.paidAmount,a.due,a.change,a.details]);(0,M.ZP)(e,{head:[["ID","Customer Name","Date","Payment Account","Grand Total","Discount","Total Discount","GST","Total Tax","Shipping Cost","Net Total","Paid Amount","Due","Change","Details"]],body:n,styles:{fontSize:8}}),e.save("SalesData.pdf")}confirmdeleteSales(e){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteSales(e)},reject:()=>{}})}};let l=s;return s.\u0275fac=function(i){return new(i||s)(t.Y36(o.qu),t.Y36(f.F0),t.Y36(q),t.Y36(y.k),t.Y36(h.YP),t.Y36(h.ez))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-sales-list"]],features:[t._Bn([h.YP,h.ez])],decls:67,vars:10,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Sales","readonly","",2,"width","120px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[1,"searchtop-container",2,"margin-left","10px"],[1,"fa","fa-file-excel","icon",2,"color","#00a65a",3,"click"],["type","text","readonly","",2,"width","20px","cursor","pointer",3,"click"],[1,"fa","fa-file-pdf","icon",2,"color","#dd4b39","font-size","20px","cursor","pointer",3,"click"],[2,"max-width","100%","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[1,"fas","fa-pen",2,"color","#05a743","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer","padding-left","20px",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"h5",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"i",5),t.TgZ(7,"input",6),t.NdJ("ngModelChange",function(u){return n.searchCustomerName=u})("input",function(){return n.filterSales()}),t.qZA(),t.YNc(8,V,1,0,"i",7),t.qZA(),t.TgZ(9,"div",8),t._UZ(10,"i",9),t.TgZ(11,"input",10),t.NdJ("click",function(){return n.createSales()}),t.qZA()(),t.TgZ(12,"div",11),t._UZ(13,"i",12)(14,"input",13),t.qZA(),t.TgZ(15,"div",11),t._UZ(16,"i",14)(17,"input",13),t.qZA(),t.TgZ(18,"div",15)(19,"i",16),t.NdJ("click",function(){return n.downloadExcel()}),t.qZA(),t.TgZ(20,"input",17),t.NdJ("click",function(){return n.downloadExcel()}),t.qZA(),t.TgZ(21,"div",11)(22,"i",18),t.NdJ("click",function(){return n.downloadPDF()}),t.qZA(),t.TgZ(23,"input",17),t.NdJ("click",function(){return n.downloadPDF()}),t.qZA()()()()(),t.TgZ(24,"div",19)(25,"table")(26,"thead")(27,"tr")(28,"th"),t._uU(29,"ID"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Customer Name"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Date"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Payment Account"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Grand Total"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Discount(%)"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Total Discount"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"GST Amount"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Total Tax"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Shipping Cost"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Net Total"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Paid Amount"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Due"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Change"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Details"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Action"),t.qZA()()(),t.TgZ(60,"tbody"),t.YNc(61,B,35,18,"tr",20),t.ALo(62,"paginate"),t.qZA()()(),t.TgZ(63,"div",21)(64,"pagination-controls",22),t.NdJ("pageChange",function(u){return n.page=u}),t.qZA()()(),t._UZ(65,"p-confirmDialog")(66,"p-toast")),2&i&&(t.xp6(1),t.Oqu(n.headervalue),t.xp6(6),t.Q6J("ngModel",n.searchCustomerName),t.xp6(1),t.Q6J("ngIf",n.searchCustomerName),t.xp6(53),t.Q6J("ngForOf",t.xi3(62,4,n.salesList,t.WLB(7,G,n.itemsPerPage,n.page))))},dependencies:[g.sg,g.O5,o.Fj,o.JJ,o.On,T.LS,U.Q,x.FN,g.uU,T._s]}),l})();var Q=c(2947),j=c(9136),S=c(3144),N=c(5839),I=c(5593),D=c(4401),w=c(2688);function $(l,s){1&l&&(t.TgZ(0,"tr")(1,"th",56),t._uU(2,"Product Name"),t.qZA(),t.TgZ(3,"th",56),t._uU(4,"Description"),t.qZA(),t.TgZ(5,"th",56),t._uU(6,"Unit Name"),t.qZA(),t.TgZ(7,"th",56),t._uU(8,"Quantity"),t.qZA(),t.TgZ(9,"th",56),t._uU(10,"Rate"),t.qZA(),t.TgZ(11,"th",56),t._uU(12,"Discount (%)"),t.qZA(),t.TgZ(13,"th",56),t._uU(14,"Total"),t.qZA(),t.TgZ(15,"th",56),t._uU(16,"Action"),t.qZA()())}function z(l,s){if(1&l){const r=t.EpF();t.TgZ(0,"tr",57)(1,"td",56),t._uU(2),t.qZA(),t.TgZ(3,"td",56),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6),t.qZA(),t.TgZ(7,"td",56),t._uU(8),t.qZA(),t.TgZ(9,"td",56),t._uU(10),t.qZA(),t.TgZ(11,"td",56),t._uU(12),t.qZA(),t.TgZ(13,"td",56),t._uU(14),t.qZA(),t.TgZ(15,"td",56)(16,"button",58),t.NdJ("click",function(){const n=t.CHM(r).rowIndex,a=t.oxw();return t.KtG(a.editLineItem(n))}),t.qZA(),t.TgZ(17,"button",59),t.NdJ("click",function(){const n=t.CHM(r).rowIndex,a=t.oxw();return t.KtG(a.removeLineItem(n))}),t.qZA()()()}if(2&l){const r=s.$implicit;let i,n,a,u,d,p,m;t.Q6J("formGroupName",s.rowIndex),t.xp6(2),t.Oqu(null==(i=r.get("productName"))?null:i.value),t.xp6(2),t.Oqu(null==(n=r.get("description"))?null:n.value),t.xp6(2),t.Oqu(null==(a=r.get("unitName"))?null:a.value),t.xp6(2),t.Oqu(null==(u=r.get("quantity"))?null:u.value),t.xp6(2),t.Oqu(null==(d=r.get("rate"))?null:d.value),t.xp6(2),t.Oqu(null==(p=r.get("discount"))?null:p.value),t.xp6(2),t.Oqu(null==(m=r.get("total"))?null:m.value)}}const H=function(){return{width:"60vw"}},W=function(){return{"background-color":"#f9f9f9",padding:"1.5rem"}};let k=(()=>{const s=class{constructor(e,i,n,a,u,d,p,m){this.fb=e,this.router=i,this.salesInnerService=n,this.datePipe=a,this.toast=u,this.route=d,this.customerService=p,this.taxServices=m,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1}ngOnInit(){this.taxServices.getServices().subscribe(e=>{this.gstList=e}),this.customerService.getCustomer().subscribe(e=>{this.customerList=e}),this.paymentAccountList=[{id:1,name:"Credit Payment"},{id:2,name:"Debit Payment"}],this.route.paramMap.subscribe(e=>{this.saleId=parseInt(e.get("id")),this.saleId?(this.isEditMode=!0,this.salesInnerService.getSalesById(this.saleId).subscribe(i=>{this.addForm=this.fb.group({customerId:[i.customerId,o.kI.required],date:[this.datePipe.transform(new Date(i.date),"dd-MM-yyyy"),o.kI.required],paymentAccount:[i.paymentAccount,o.kI.required],grandTotal:[{value:i.grandTotal,disabled:!0}],discount:[i.discount,o.kI.required],totalDiscount:[{value:i.totalDiscount,disabled:!0}],noTax:[0],gstPercentage:[i.gstPercentage],gst:[i.gst],totalTax:[{value:i.totalTax,disabled:!0}],shippingCost:[i.shippingCost,o.kI.required],netTotal:[{value:i.netTotal,disabled:!0}],paidAmount:[i.paidAmount,o.kI.required],due:[{value:i.due,disabled:!0}],change:[{value:i.change,disabled:!0}],details:[i.details],lineItems:this.fb.array([])});const n=i.lineItems.map(a=>this.fb.group({productName:[a.productName],description:[a.description],unitName:[a.unitName],quantity:[a.quantity],rate:[a.rate],discount:[a.discount?a.discount:0],total:[a.total]}));this.addForm.setControl("lineItems",this.fb.array(n)),this.addForm.valueChanges.subscribe(()=>this.calculateAllValues())})):this.isEditMode=!1}),this.addForm=this.fb.group({customerId:[null,o.kI.required],date:[new Date,o.kI.required],paymentAccount:["",o.kI.required],grandTotal:[{value:0,disabled:!0}],discount:[0,o.kI.required],totalDiscount:[{value:0,disabled:!0}],noTax:[0],gstPercentage:[0],gst:[0],totalTax:[{value:0,disabled:!0}],shippingCost:[0,o.kI.required],netTotal:[{value:0,disabled:!0}],paidAmount:[0,o.kI.required],due:[{value:0,disabled:!0}],change:[{value:0,disabled:!0}],details:[""],lineItems:this.fb.array([])}),this.lineItemForm=this.fb.group({productName:["",o.kI.required],description:[""],unitName:["",o.kI.required],quantity:[1,[o.kI.required,o.kI.min(1)]],rate:[0,[o.kI.required,o.kI.min(0)]],discount:[0,[o.kI.min(0),o.kI.max(100)]]}),this.addForm.valueChanges.subscribe(()=>this.calculateAllValues())}get lineItems(){return this.addForm.get("lineItems")}formatDiscount(){const e=this.addForm.get("discount")?.value;null!=e&&this.addForm.get("discount")?.setValue(parseFloat(e).toFixed(2))}formatShipping(){const e=this.addForm.get("shippingCost")?.value;null!=e&&this.addForm.get("shippingCost")?.setValue(parseFloat(e).toFixed(2))}formatPaidAmount(){const e=this.addForm.get("paidAmount")?.value;null!=e&&this.addForm.get("paidAmount")?.setValue(parseFloat(e).toFixed(2))}allowOnlyNumbers(e){/[0-9.]/.test(e.key)||e.preventDefault()}showAddLineItemDialog(){this.dialogMode="add",this.lineItemForm.reset({quantity:1,rate:0,discount:0}),this.displayDialog=!0,this.editIndex=null}hideAddLineItemDialog(){this.displayDialog=!1}calculateTotal(e){const{quantity:i,rate:n,discount:a}=e,u=i*n;return u-u*a/100}saveLineItem(){if(this.lineItemForm.valid){const e={...this.lineItemForm.value};e.total=this.calculateTotal(e),"add"===this.dialogMode?this.lineItems.push(this.fb.group(e)):"edit"===this.dialogMode&&null!==this.editIndex&&this.lineItems.setControl(this.editIndex,this.fb.group(e)),this.hideAddLineItemDialog(),this.calculateAllValues(),this.toast.showSuccess("Line Items added successfully")}else this.toast.showWarning("Please Fill Mandatory Field")}calculateAllValues(){const e=this.addForm.getRawValue();let i=0;(e.lineItems||[]).forEach(_=>{i+=_.total||0});const a=Number(e.discount||0),u=Number(e.shippingCost||0),d=Number(e.paidAmount||0),p=i*a/100,m=i-p,Z=this.addForm.value.gstPercentage||0,L=m*(this.gstList.find(_=>_.id===Z)?.tax||0)/100,J=m+L+u,et=J-d;this.addForm.get("grandTotal")?.setValue(i,{emitEvent:!1}),this.addForm.get("totalDiscount")?.setValue(p,{emitEvent:!1}),this.addForm.get("gstPercentage")?.setValue(this.addForm.value.gstPercentage?this.addForm.value.gstPercentage:0,{emitEvent:!1}),this.addForm.get("gst")?.setValue(L,{emitEvent:!1}),this.addForm.get("netTotal")?.setValue(J,{emitEvent:!1}),this.addForm.get("due")?.setValue(et,{emitEvent:!1})}removeLineItem(e){this.lineItems.removeAt(e)}editLineItem(e){this.dialogMode="edit",this.editIndex=e;const i=this.lineItems.at(e).value;this.lineItemForm.setValue({productName:i.productName,description:i.description,unitName:i.unitName,quantity:i.quantity,rate:i.rate,discount:i.discount}),this.displayDialog=!0}onSubmit(){const e=this.addForm.get("lineItems"),i=this.addForm.getRawValue(),n=this.addForm.value.date;if("string"==typeof n){const[a,u,d]=n.split("-"),p=new Date(Date.UTC(Number(d),Number(u)-1,Number(a)));isNaN(p.getTime())||(i.date=p.toISOString())}else if(n instanceof Date){const a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()));i.date=a.toISOString()}this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):0!==e.length?this.isEditMode?this.salesInnerService.updateSales(Number(this.saleId),i).subscribe(a=>{this.toast.showSuccess("Sales Details updated successfully"),this.router.navigateByUrl("sales/sales")},a=>{this.toast.showApiError(a)}):this.salesInnerService.insertSales(i).subscribe(a=>{this.toast.showSuccess("Sales Details saved successfully"),this.router.navigateByUrl("sales/sales")},a=>{this.toast.showApiError(a)}):this.toast.showWarning("Please add atleast one Line Items before saving.")}backButton(){this.router.navigateByUrl("sales/sales")}cancel(){this.router.navigateByUrl("sales/sales")}};let l=s;return s.\u0275fac=function(i){return new(i||s)(t.Y36(o.qu),t.Y36(f.F0),t.Y36(q),t.Y36(g.uU),t.Y36(y.k),t.Y36(f.gz),t.Y36(Q.v),t.Y36(j.f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-sales-create"]],features:[t._Bn([g.uU])],decls:176,vars:45,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container","d-flex","flex-column",2,"min-height","100%",3,"formGroup"],[1,"flex-grow-1"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],[1,"w-100"],["optionLabel","name","optionValue","id","formControlName","customerId","placeholder","Choose your customer name","styleClass","w-100","appendTo","body",3,"options","showClear"],[2,"width","320px"],["formControlName","date","dateFormat","dd-mm-yy","placeholder","Choose Date","styleClass","w-100","appendTo","body",3,"showIcon"],[1,"row","mt-3"],["type","text","formControlName","paymentAccount",1,"form-control","small-placeholder"],[1,"row","mt-5"],[1,"col-12","d-flex","justify-content-between","align-items-center","mb-2"],[1,"label"],["pButton","","type","button","icon","pi pi-plus","label","Add Line Item",2,"background-color","#2199e8","color","white","border","none",3,"click"],[1,"col-12"],["formArrayName","lineItems","scrollHeight","400px",3,"value","formGroup","scrollable"],["pTemplate","header"],["pTemplate","body"],[1,"col-sm-3"],[1,"label",2,"white-space","nowrap","min-width","100px"],["type","text","disabled","",1,"form-control",2,"min-width","120px",3,"value"],["type","text","formControlName","discount",1,"form-control",2,"min-width","120px",3,"keypress","blur"],["type","checkbox","formControlName","noTax",1,"form-check-input","custom-checkbox"],["optionLabel","tax","optionValue","id","formControlName","gstPercentage","styleClass","w-100","appendTo","body",3,"options","showClear"],["type","text","formControlName","shippingCost",1,"form-control",2,"min-width","120px",3,"keypress","blur"],["type","text","formControlName","paidAmount",1,"form-control",2,"min-width","120px",3,"keypress","blur"],["formControlName","details","rows","3",1,"form-control"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"],[3,"visible","modal","contentStyle","styleClass","closable","header","visibleChange"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-sm-6","d-flex","align-items-center","mb-2"],[2,"width","150px"],["for","productName"],["type","text","id","productName","formControlName","productName","placeholder","Enter product name",1,"form-control"],["for","description"],["type","text","id","description","formControlName","description","placeholder","Enter description",1,"form-control"],["for","unitName"],["type","text","id","unitName","formControlName","unitName","placeholder","Enter unit name",1,"form-control"],["for","quantity"],["type","number","id","quantity","formControlName","quantity","placeholder","Enter quantity",1,"form-control"],["for","rate"],["type","number","id","rate","formControlName","rate","placeholder","Enter rate",1,"form-control"],["for","discount"],["type","number","id","discount","formControlName","discount","placeholder","Enter discount",1,"form-control"],["pButton","","label","Save","icon","pi pi-check",1,"p-dialog-button-save",3,"click"],["pButton","","label","Cancel","icon","pi pi-times",1,"p-button-secondary","p-dialog-button-cancel",2,"margin-left","5px",3,"click"],[1,"nowrap-column"],[3,"formGroupName"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-edit",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"h5",0)(1,"i",1),t.NdJ("click",function(){return n.backButton()}),t.qZA(),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),t._uU(11,"Customer "),t.TgZ(12,"span",10),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"div",11),t._UZ(15,"p-dropdown",12),t.qZA()()(),t.TgZ(16,"div",7)(17,"div",8)(18,"label",9),t._uU(19,"Date "),t.TgZ(20,"span",10),t._uU(21,"*"),t.qZA()(),t.TgZ(22,"div",13),t._UZ(23,"p-calendar",14),t.qZA()()()(),t.TgZ(24,"div",15)(25,"div",7)(26,"div",8)(27,"label",9),t._uU(28,"Payment Account "),t.TgZ(29,"span",10),t._uU(30,"*"),t.qZA()(),t._UZ(31,"input",16),t.qZA()()(),t.TgZ(32,"div",17)(33,"div",18)(34,"h6",19),t._uU(35,"Line Items"),t.qZA(),t.TgZ(36,"button",20),t.NdJ("click",function(){return n.showAddLineItemDialog()}),t.qZA()(),t.TgZ(37,"div",21)(38,"p-table",22),t.YNc(39,$,17,0,"ng-template",23),t.YNc(40,z,18,8,"ng-template",24),t.qZA()()(),t.TgZ(41,"div",17)(42,"div",25)(43,"div",8)(44,"label",26),t._uU(45,"Grand Total"),t.qZA(),t._UZ(46,"input",27),t.ALo(47,"number"),t.qZA()(),t.TgZ(48,"div",25)(49,"div",8)(50,"label",26),t._uU(51,"Discount(%) "),t.TgZ(52,"span",10),t._uU(53,"*"),t.qZA()(),t.TgZ(54,"input",28),t.NdJ("keypress",function(u){return n.allowOnlyNumbers(u)})("blur",function(){return n.formatDiscount()}),t.qZA()()(),t.TgZ(55,"div",25)(56,"div",8)(57,"label",26),t._uU(58,"Total Discount"),t.qZA(),t._UZ(59,"input",27),t.ALo(60,"number"),t.qZA()(),t.TgZ(61,"div",25)(62,"div",8)(63,"label",26),t._uU(64,"No Tax"),t.qZA(),t._UZ(65,"input",29),t.qZA()()(),t.TgZ(66,"div",15)(67,"div",25)(68,"div",8)(69,"label",26),t._uU(70,"GST(%)"),t.qZA(),t._UZ(71,"p-dropdown",30),t.qZA()(),t.TgZ(72,"div",25)(73,"div",8)(74,"label",26),t._uU(75,"GST Amount"),t.qZA(),t._UZ(76,"input",27),t.ALo(77,"number"),t.qZA()(),t.TgZ(78,"div",25)(79,"div",8)(80,"label",26),t._uU(81,"Shipping Cost "),t.TgZ(82,"span",10),t._uU(83,"*"),t.qZA()(),t.TgZ(84,"input",31),t.NdJ("keypress",function(u){return n.allowOnlyNumbers(u)})("blur",function(){return n.formatShipping()}),t.qZA()()(),t.TgZ(85,"div",25)(86,"div",8)(87,"label",26),t._uU(88,"Net Total"),t.qZA(),t._UZ(89,"input",27),t.ALo(90,"number"),t.qZA()()(),t.TgZ(91,"div",15)(92,"div",25)(93,"div",8)(94,"label",26),t._uU(95,"Paid Amount "),t.TgZ(96,"span",10),t._uU(97,"*"),t.qZA()(),t.TgZ(98,"input",32),t.NdJ("keypress",function(u){return n.allowOnlyNumbers(u)})("blur",function(){return n.formatPaidAmount()}),t.qZA()()(),t.TgZ(99,"div",25)(100,"div",8)(101,"label",26),t._uU(102,"Due"),t.qZA(),t._UZ(103,"input",27),t.ALo(104,"number"),t.qZA()(),t.TgZ(105,"div",25)(106,"div",8)(107,"label",26),t._uU(108,"Change"),t.qZA(),t._UZ(109,"input",27),t.ALo(110,"number"),t.qZA()()(),t.TgZ(111,"div",15)(112,"div",7)(113,"div",8)(114,"label",26),t._uU(115,"Details"),t.qZA(),t.TgZ(116,"textarea",33),t._uU(117,"              "),t.qZA()()()()()(),t.TgZ(118,"div",34)(119,"button",35),t.NdJ("click",function(){return n.cancel()}),t._uU(120,"Cancel"),t.qZA(),t.TgZ(121,"button",36),t.NdJ("click",function(){return n.onSubmit()}),t._uU(122,"Save"),t.qZA()()()(),t.TgZ(123,"p-dialog",37),t.NdJ("visibleChange",function(u){return n.displayDialog=u}),t.TgZ(124,"form",38)(125,"div",39)(126,"div",40)(127,"div",41)(128,"label",42),t._uU(129,"Product Name"),t.TgZ(130,"span",10),t._uU(131,"*"),t.qZA()()(),t.TgZ(132,"div",4),t._UZ(133,"input",43),t.qZA()(),t.TgZ(134,"div",40)(135,"div",41)(136,"label",44),t._uU(137,"Description"),t.qZA()(),t.TgZ(138,"div",4),t._UZ(139,"input",45),t.qZA()(),t.TgZ(140,"div",40)(141,"div",41)(142,"label",46),t._uU(143,"Unit Name"),t.TgZ(144,"span",10),t._uU(145,"*"),t.qZA()()(),t.TgZ(146,"div",4),t._UZ(147,"input",47),t.qZA()(),t.TgZ(148,"div",40)(149,"div",41)(150,"label",48),t._uU(151,"Quantity"),t.TgZ(152,"span",10),t._uU(153,"*"),t.qZA()()(),t.TgZ(154,"div",4),t._UZ(155,"input",49),t.qZA()()(),t.TgZ(156,"div",39)(157,"div",40)(158,"div",41)(159,"label",50),t._uU(160,"Rate"),t.TgZ(161,"span",10),t._uU(162,"*"),t.qZA()()(),t.TgZ(163,"div",4),t._UZ(164,"input",51),t.qZA()(),t.TgZ(165,"div",40)(166,"div",41)(167,"label",52),t._uU(168,"Discount (%)"),t.TgZ(169,"span",10),t._uU(170,"*"),t.qZA()()(),t.TgZ(171,"div",4),t._UZ(172,"input",53),t.qZA()()()(),t.TgZ(173,"p-footer")(174,"button",54),t.NdJ("click",function(){return n.saveLineItem()}),t.qZA(),t.TgZ(175,"button",55),t.NdJ("click",function(){return n.hideAddLineItemDialog()}),t.qZA()()()),2&i){let a,u,d,p,m,Z;t.xp6(2),t.hij(" ",n.isEditMode?"Edit Sales":"New Sales","\n"),t.xp6(2),t.Q6J("formGroup",n.addForm),t.xp6(11),t.Q6J("options",n.customerList)("showClear",!0),t.xp6(8),t.Q6J("showIcon",!0),t.xp6(15),t.Q6J("value",n.lineItems.controls)("formGroup",n.addForm)("scrollable",!0),t.xp6(8),t.Q6J("value",t.xi3(47,25,null==(a=n.addForm.get("grandTotal"))?null:a.value,"1.2-2")),t.xp6(13),t.Q6J("value",t.xi3(60,28,null==(u=n.addForm.get("totalDiscount"))?null:u.value,"1.2-2")),t.xp6(12),t.Q6J("options",n.gstList)("showClear",!0),t.xp6(5),t.Q6J("value",t.xi3(77,31,null==(d=n.addForm.get("gst"))?null:d.value,"1.2-2")),t.xp6(13),t.Q6J("value",t.xi3(90,34,null==(p=n.addForm.get("netTotal"))?null:p.value,"1.2-2")),t.xp6(14),t.Q6J("value",t.xi3(104,37,null==(m=n.addForm.get("due"))?null:m.value,"1.2-2")),t.xp6(6),t.Q6J("value",t.xi3(110,40,null==(Z=n.addForm.get("change"))?null:Z.value,"1.2-2")),t.xp6(14),t.Akn(t.DdM(43,H)),t.MGl("header","","add"===n.dialogMode?"Add":"Edit"," Line Item"),t.Q6J("visible",n.displayDialog)("modal",!0)("contentStyle",t.DdM(44,W))("styleClass","custom-dialog-shadow")("closable",!0),t.xp6(1),t.Q6J("formGroup",n.lineItemForm)}},dependencies:[o._Y,o.Fj,o.wV,o.Wl,o.JJ,o.JL,o.sg,o.u,o.x0,o.CE,S.iA,h.$_,h.jx,N.V,I.Hq,D.Lt,w.f,g.JJ],styles:[".custom-checkbox[_ngcontent-%COMP%]{border:2px solid #0d6efd;box-shadow:0 0 0 2px #0d6efd40;border-radius:4px}.custom-checkbox[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #0d6efd80}"]}),l})();const K=[{path:"",component:Y},{path:"create",component:k},{path:"edit/:id",component:k}];let X=(()=>{const s=class{};let l=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[f.Bz.forChild(K),f.Bz]}),l})();var R=c(1740);let tt=(()=>{const s=class{};let l=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.ez,X,o.UX,o.u5,C.JF,T.JX,S.U$,N.S,I.hJ,R.j,D.kW,w._8,U.D,x.EV]}),l})()}}]);