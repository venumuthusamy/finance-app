"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[754],{1754:(Mi,z,d)=>{d.r(z),d.d(z,{ChartOfAccountModule:()=>ki});var g=d(6895),O=d(4333),_=d(433),ee=d(529),te=d(3144),ie=d(5839),le=d(5593),ne=d(1740),R=d(4401),oe=d(2688),F=d(2137),H=d(3887),y=d(9965),x=d(805),e=d(8256),A=d(6870),V=d(8889),h=d(9592),P=d(8926),B=d(1795),N=d(3718),v=d(982),I=d(7579),re=d(9463),Z=d(5984),U=d(3774),J=d(3003),ae=d(4489),Y=d(3891),se=d(7832);let ce=(()=>{class i extends se.s{}return i.\u0275fac=function(){let o;return function(l){return(o||(o=e.n5z(i)))(l||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["MinusIcon"]],standalone:!0,features:[e.qOj,e.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(t,l){1&t&&(e.O4$(),e.TgZ(0,"svg",0),e._UZ(1,"path",1),e.qZA()),2&t&&(e.Tol(l.getClassNames()),e.uIk("aria-label",l.ariaLabel)("aria-hidden",l.ariaHidden)("role",l.role))},dependencies:[g.ez],encapsulation:2}),i})();var de=d(3050),he=d(2007),Q=d(162);const pe=["container"],ue=["resizeHelper"],fe=["reorderIndicatorUp"],ge=["reorderIndicatorDown"],me=["table"],be=["scrollableView"],Te=["scrollableFrozenView"];function _e(i,o){if(1&i&&e._UZ(0,"i"),2&i){const t=e.oxw(2);e.Tol("p-treetable-loading-icon pi-spin "+t.loadingIcon)}}function ve(i,o){1&i&&e._UZ(0,"SpinnerIcon",18),2&i&&e.Q6J("spin",!0)("styleClass","p-treetable-loading-icon")}function Ce(i,o){}function we(i,o){1&i&&e.YNc(0,Ce,0,0,"ng-template")}function xe(i,o){if(1&i&&(e.TgZ(0,"span",19),e.YNc(1,we,1,0,null,20),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.loadingIconTemplate)}}function Se(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ve,1,2,"SpinnerIcon",16),e.YNc(2,xe,2,1,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.loadingIconTemplate),e.xp6(1),e.Q6J("ngIf",t.loadingIconTemplate)}}function ye(i,o){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13),e.YNc(2,_e,1,2,"i",14),e.YNc(3,Se,3,2,"ng-container",15),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.loadingIcon),e.xp6(1),e.Q6J("ngIf",!t.loadingIcon)}}function Ie(i,o){1&i&&e.GkF(0)}function Ee(i,o){if(1&i&&(e.TgZ(0,"div",21),e.YNc(1,Ie,1,0,"ng-container",20),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.captionTemplate)}}function ke(i,o){1&i&&e.GkF(0)}function Ne(i,o){if(1&i&&e.YNc(0,ke,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorFirstPageLinkIconTemplate)}}function Me(i,o){1&i&&e.GkF(0)}function De(i,o){if(1&i&&e.YNc(0,Me,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorPreviousPageLinkIconTemplate)}}function Le(i,o){1&i&&e.GkF(0)}function ze(i,o){if(1&i&&e.YNc(0,Le,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorLastPageLinkIconTemplate)}}function Oe(i,o){1&i&&e.GkF(0)}function Re(i,o){if(1&i&&e.YNc(0,Oe,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorNextPageLinkIconTemplate)}}function Fe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"p-paginator",22),e.NdJ("onPageChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onPageChange(n))}),e.YNc(1,Ne,1,1,"ng-template",23),e.YNc(2,De,1,1,"ng-template",24),e.YNc(3,ze,1,1,"ng-template",25),e.YNc(4,Re,1,1,"ng-template",26),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showPageLinks",t.showPageLinks)}}function He(i,o){1&i&&e.GkF(0)}function Ae(i,o){1&i&&e.GkF(0)}function Ve(i,o){1&i&&e.GkF(0)}const w=function(i){return{$implicit:i}};function Pe(i,o){if(1&i&&(e.TgZ(0,"div",27)(1,"table",28,29),e.YNc(3,He,1,0,"ng-container",30),e.TgZ(4,"thead",31),e.YNc(5,Ae,1,0,"ng-container",30),e.qZA(),e._UZ(6,"tbody",32),e.TgZ(7,"tfoot",33),e.YNc(8,Ve,1,0,"ng-container",30),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.tableStyleClass)("ngStyle",t.tableStyle),e.xp6(2),e.Q6J("ngTemplateOutlet",t.colGroupTemplate)("ngTemplateOutletContext",e.VKq(10,w,t.columns)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.VKq(12,w,t.columns)),e.xp6(1),e.Q6J("pTreeTableBody",t.columns)("pTreeTableBodyTemplate",t.bodyTemplate),e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",e.VKq(14,w,t.columns))}}const Be=function(i){return{width:i}};function Ze(i,o){if(1&i&&e._UZ(0,"div",38,39),2&i){const t=e.oxw(2);e.Q6J("ttScrollableView",t.frozenColumns)("frozen",!0)("ngStyle",e.VKq(4,Be,t.frozenWidth))("scrollHeight",t.scrollHeight)}}const Ue=function(i,o){return{left:i,width:o}};function Je(i,o){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,Ze,2,6,"div",35),e._UZ(2,"div",36,37),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.frozenColumns||t.frozenBodyTemplate),e.xp6(1),e.Q6J("ttScrollableView",t.columns)("frozen",!1)("scrollHeight",t.scrollHeight)("ngStyle",e.WLB(5,Ue,t.frozenWidth,"calc(100% - "+t.frozenWidth+")"))}}function Ye(i,o){1&i&&e.GkF(0)}function Qe(i,o){if(1&i&&e.YNc(0,Ye,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorFirstPageLinkIconTemplate)}}function Ge(i,o){1&i&&e.GkF(0)}function Ke(i,o){if(1&i&&e.YNc(0,Ge,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorPreviousPageLinkIconTemplate)}}function je(i,o){1&i&&e.GkF(0)}function qe(i,o){if(1&i&&e.YNc(0,je,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorLastPageLinkIconTemplate)}}function We(i,o){1&i&&e.GkF(0)}function $e(i,o){if(1&i&&e.YNc(0,We,1,0,"ng-container",20),2&i){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.paginatorNextPageLinkIconTemplate)}}function Xe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"p-paginator",40),e.NdJ("onPageChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onPageChange(n))}),e.YNc(1,Qe,1,1,"ng-template",23),e.YNc(2,Ke,1,1,"ng-template",24),e.YNc(3,qe,1,1,"ng-template",25),e.YNc(4,$e,1,1,"ng-template",26),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showPageLinks",t.showPageLinks)}}function et(i,o){1&i&&e.GkF(0)}function tt(i,o){if(1&i&&(e.TgZ(0,"div",41),e.YNc(1,et,1,0,"ng-container",20),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.summaryTemplate)}}function it(i,o){1&i&&e._UZ(0,"div",42,43)}function lt(i,o){1&i&&e._UZ(0,"ArrowDownIcon")}function nt(i,o){}function ot(i,o){1&i&&e.YNc(0,nt,0,0,"ng-template")}function rt(i,o){if(1&i&&(e.TgZ(0,"span",44,45),e.YNc(2,lt,1,0,"ArrowDownIcon",15),e.YNc(3,ot,1,0,null,20),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.reorderIndicatorUpIconTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",t.reorderIndicatorUpIconTemplate)}}function at(i,o){1&i&&e._UZ(0,"ArrowUpIcon")}function st(i,o){}function ct(i,o){1&i&&e.YNc(0,st,0,0,"ng-template")}function dt(i,o){if(1&i&&(e.TgZ(0,"span",46,47),e.YNc(2,at,1,0,"ArrowUpIcon",15),e.YNc(3,ct,1,0,null,20),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.reorderIndicatorDownIconTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",t.reorderIndicatorDownIconTemplate)}}const ht=function(i,o,t,l,n){return{"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":o,"p-treetable-resizable":t,"p-treetable-resizable-fit":l,"p-treetable-flex-scrollable":n}},pt=["pTreeTableBody",""];function ut(i,o){1&i&&e.GkF(0)}const ft=function(i,o,t,l){return{$implicit:i,node:o,rowData:t,columns:l}};function gt(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ut,1,0,"ng-container",2),e.BQk()),2&i){const t=e.oxw().$implicit,l=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",l.template)("ngTemplateOutletContext",e.l5B(2,ft,t,t.node,t.node.data,l.columns))}}function mt(i,o){1&i&&e.YNc(0,gt,2,7,"ng-container",1),2&i&&e.Q6J("ngIf",o.$implicit.visible)}function bt(i,o){1&i&&e.GkF(0)}const Tt=function(i,o){return{$implicit:i,frozen:o}};function _t(i,o){if(1&i&&(e.ynx(0),e.YNc(1,bt,1,0,"ng-container",2),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.tt.emptyMessageTemplate)("ngTemplateOutletContext",e.WLB(2,Tt,t.columns,t.frozen))}}const vt=["scrollHeader"],Ct=["scrollHeaderBox"],wt=["scrollBody"],xt=["scrollTable"],St=["loadingTable"],yt=["scrollFooter"],It=["scrollFooterBox"],Et=["scrollableAligner"],kt=["scroller"],Nt=["ttScrollableView",""];function Mt(i,o){1&i&&e.GkF(0)}function Dt(i,o){1&i&&e.GkF(0)}function Lt(i,o){1&i&&e.GkF(0)}const G=function(i,o){return{$implicit:i,options:o}};function zt(i,o){if(1&i&&e.YNc(0,Lt,1,0,"ng-container",5),2&i){const t=o.$implicit,l=o.options;e.oxw(2);const n=e.MAs(11);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,G,t,l))}}function Ot(i,o){1&i&&e.GkF(0)}const Rt=function(i){return{options:i}};function Ft(i,o){if(1&i&&e.YNc(0,Ot,1,0,"ng-container",5),2&i){const t=o.options,l=e.oxw(3);e.Q6J("ngTemplateOutlet",l.loaderTemplate)("ngTemplateOutletContext",e.VKq(2,Rt,t))}}function Ht(i,o){1&i&&(e.ynx(0),e.YNc(1,Ft,1,4,"ng-template",14),e.BQk())}const At=function(i){return{height:i}};function Vt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"p-scroller",11,12),e.NdJ("onLazyLoad",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.tt.onLazyItemLoad(n))}),e.YNc(2,zt,1,5,"ng-template",13),e.YNc(3,Ht,2,0,"ng-container",8),e.qZA()}if(2&i){const t=e.oxw();e.Akn(e.VKq(8,At,"flex"!==t.tt.scrollHeight?t.tt.scrollHeight:void 0)),e.Q6J("items",t.tt.serializedValue)("scrollHeight","flex"!==t.scrollHeight?void 0:"100%")("itemSize",t.tt.virtualScrollItemSize||t.tt._virtualRowHeight)("lazy",t.tt.lazy)("options",t.tt.virtualScrollOptions),e.xp6(3),e.Q6J("ngIf",t.loaderTemplate)}}function Pt(i,o){1&i&&e.GkF(0)}const Bt=function(i,o){return{"max-height":i,"overflow-y":o}},Zt=function(){return{}};function Ut(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",15,16),e.YNc(3,Pt,1,0,"ng-container",5),e.qZA(),e.BQk()),2&i){const t=e.oxw(),l=e.MAs(11);e.xp6(1),e.Q6J("ngStyle",e.WLB(3,Bt,"flex"!==t.tt.scrollHeight?t.scrollHeight:void 0,!t.frozen&&t.tt.scrollHeight?"scroll":void 0)),e.xp6(2),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.WLB(7,G,t.serializedValue,e.DdM(6,Zt)))}}function Jt(i,o){1&i&&e.GkF(0)}function Yt(i,o){1&i&&e._UZ(0,"div",21,22)}function Qt(i,o){if(1&i&&(e.TgZ(0,"table",17,18),e.YNc(2,Jt,1,0,"ng-container",5),e._UZ(3,"tbody",19),e.qZA(),e.YNc(4,Yt,2,0,"div",20)),2&i){const t=o.$implicit,l=o.options,n=e.oxw();e.Akn(l.contentStyle),e.Tol(n.tt.tableStyleClass),e.Q6J("ngClass",l.contentStyleClass)("ngStyle",n.tt.tableStyle),e.xp6(2),e.Q6J("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",e.VKq(13,w,n.columns)),e.xp6(1),e.Q6J("pTreeTableBody",n.columns)("pTreeTableBodyTemplate",n.frozen&&n.tt.frozenBodyTemplate||n.tt.bodyTemplate)("serializedNodes",t)("frozen",n.frozen),e.xp6(1),e.Q6J("ngIf",n.frozen)}}function Gt(i,o){1&i&&e.GkF(0)}function Kt(i,o){1&i&&e.GkF(0)}function jt(i,o){if(1&i&&(e.TgZ(0,"div",23,24)(2,"div",25,26)(4,"table",27),e.YNc(5,Gt,1,0,"ng-container",5),e.TgZ(6,"tfoot",28),e.YNc(7,Kt,1,0,"ng-container",5),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",t.tt.tableStyleClass)("ngStyle",t.tt.tableStyle),e.xp6(1),e.Q6J("ngTemplateOutlet",t.frozen&&t.tt.frozenColGroupTemplate||t.tt.colGroupTemplate)("ngTemplateOutletContext",e.VKq(6,w,t.columns)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.frozen&&t.tt.frozenFooterTemplate||t.tt.footerTemplate)("ngTemplateOutletContext",e.VKq(8,w,t.columns))}}function hi(i,o){1&i&&e._UZ(0,"ChevronDownIcon")}function pi(i,o){1&i&&e._UZ(0,"ChevronRightIcon")}function ui(i,o){if(1&i&&(e.ynx(0),e.YNc(1,hi,1,0,"ChevronDownIcon",1),e.YNc(2,pi,1,0,"ChevronRightIcon",1),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.rowNode.node.expanded),e.xp6(1),e.Q6J("ngIf",!t.rowNode.node.expanded)}}function fi(i,o){}function gi(i,o){1&i&&e.YNc(0,fi,0,0,"ng-template")}let M=(()=>{class i{constructor(){this.sortSource=new I.x,this.selectionSource=new I.x,this.contextMenuSource=new I.x,this.uiUpdateSource=new I.x,this.totalRecordsSource=new I.x,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.uiUpdateSource$=this.uiUpdateSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable()}onSort(t){this.sortSource.next(t)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(t){this.contextMenuSource.next(t)}onUIUpdate(t){this.uiUpdateSource.next(t)}onTotalRecordsChange(t){this.totalRecordsSource.next(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),E=(()=>{class i{constructor(t,l,n,r,a,s,c){this.document=t,this.renderer=l,this.el=n,this.cd=r,this.zone=a,this.tableService=s,this.filterService=c,this.lazy=!1,this.lazyLoadOnInit=!0,this.first=0,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new e.vpe,this.contextMenuSelectionChange=new e.vpe,this.contextMenuSelectionMode="separate",this.compareSelectionBy="deepEquals",this.showLoader=!0,this.virtualScrollDelay=150,this.columnResizeMode="fit",this.rowTrackBy=(u,f)=>f,this.filters={},this.filterDelay=300,this.filterMode="lenient",this.onFilter=new e.vpe,this.onNodeExpand=new e.vpe,this.onNodeCollapse=new e.vpe,this.onPage=new e.vpe,this.onSort=new e.vpe,this.onLazyLoad=new e.vpe,this.sortFunction=new e.vpe,this.onColResize=new e.vpe,this.onColReorder=new e.vpe,this.onNodeSelect=new e.vpe,this.onNodeUnselect=new e.vpe,this.onContextMenuSelect=new e.vpe,this.onHeaderCheckboxToggle=new e.vpe,this.onEditInit=new e.vpe,this.onEditComplete=new e.vpe,this.onEditCancel=new e.vpe,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._sortOrder=1,this.selectionKeys={}}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(t){this._virtualRowHeight=t,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"caption":this.captionTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"body":this.bodyTemplate=t.template;break;case"loadingbody":this.loadingBodyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"summary":this.summaryTemplate=t.template;break;case"colgroup":this.colGroupTemplate=t.template;break;case"emptymessage":this.emptyMessageTemplate=t.template;break;case"paginatorleft":this.paginatorLeftTemplate=t.template;break;case"paginatorright":this.paginatorRightTemplate=t.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=t.template;break;case"frozenheader":this.frozenHeaderTemplate=t.template;break;case"frozenbody":this.frozenBodyTemplate=t.template;break;case"frozenfooter":this.frozenFooterTemplate=t.template;break;case"frozencolgroup":this.frozenColGroupTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=t.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=t.template;break;case"sorticon":this.sortIconTemplate=t.template;break;case"checkboxicon":this.checkboxIconTemplate=t.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=t.template;break;case"togglericon":this.togglerIconTemplate=t.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=t.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=t.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=t.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=t.template}})}ngOnChanges(t){t.value&&(this._value=t.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),t.sortField&&(this._sortField=t.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.sortOrder&&(this._sortOrder=t.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.multiSortMeta&&(this._multiSortMeta=t.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),t.selection&&(this._selection=t.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(t){this._value=t}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(t,l,n,r){if(l&&l.length)for(let a of l){a.parent=t;const s={node:a,parent:t,level:n,visible:r&&(!t||t.expanded)};this.serializedValue.push(s),s.visible&&a.expanded&&this.serializeNodes(a,a.children,n+1,s.visible)}}serializePageNodes(){let t=this.filteredNodes||this.value;if(this.serializedValue=[],t&&t.length){const l=this.lazy?0:this.first;for(let n=l;n<l+this.rows;n++){let r=t[n];r&&(this.serializedValue.push({node:r,parent:null,level:0,visible:!0}),this.serializeNodes(r,r.children,1,!0))}}}get totalRecords(){return this._totalRecords}set totalRecords(t){this._totalRecords=t,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(t){this._sortField=t}get sortOrder(){return this._sortOrder}set sortOrder(t){this._sortOrder=t}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(t){this._multiSortMeta=t}get selection(){return this._selection}set selection(t){this._selection=t}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let t of this._selection)this.selectionKeys[String(v.gb.resolveFieldData(t.data,this.dataKey))]=1;else this.selectionKeys[String(v.gb.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(t){this.first=t.first,this.rows=t.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(t){let l=t.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===t.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=t.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let n=l.metaKey||l.ctrlKey,r=this.getSortMeta(t.field);r?n?r.order=-1*r.order:(this._multiSortMeta=[{field:t.field,order:-1*r.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!n||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:t.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let t={field:this.sortField,order:this.sortOrder};this.onSort.emit(t),this.tableService.onSort(t),this.updateSerializedValue()}}sortNodes(t){if(t&&0!==t.length){this.customSort?this.sortFunction.emit({data:t,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):t.sort((l,n)=>{let r=v.gb.resolveFieldData(l.data,this.sortField),a=v.gb.resolveFieldData(n.data,this.sortField),s=null;return s=null==r&&null!=a?-1:null!=r&&null==a?1:null==r&&null==a?0:"string"==typeof r&&"string"==typeof a?r.localeCompare(a,void 0,{numeric:!0}):r<a?-1:r>a?1:0,this.sortOrder*s});for(let l of t)this.sortNodes(l.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(t){if(t&&0!==t.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):t.sort((l,n)=>this.multisortField(l,n,this.multiSortMeta,0));for(let l of t)this.sortMultipleNodes(l.children)}}multisortField(t,l,n,r){if(v.gb.isEmpty(this.multiSortMeta)||v.gb.isEmpty(n[r]))return 0;let a=v.gb.resolveFieldData(t.data,n[r].field),s=v.gb.resolveFieldData(l.data,n[r].field),c=null;if(null==a&&null!=s?c=-1:null!=a&&null==s?c=1:null==a&&null==s&&(c=0),"string"==typeof a||a instanceof String){if(a.localeCompare&&a!=s)return n[r].order*a.localeCompare(s,void 0,{numeric:!0})}else c=a<s?-1:1;return a==s?n.length-1>r?this.multisortField(t,l,n,r+1):0:n[r].order*c}getSortMeta(t){if(this.multiSortMeta&&this.multiSortMeta.length)for(let l=0;l<this.multiSortMeta.length;l++)if(this.multiSortMeta[l].field===t)return this.multiSortMeta[l];return null}isSorted(t){if("single"===this.sortMode)return this.sortField&&this.sortField===t;if("multiple"===this.sortMode){let l=!1;if(this.multiSortMeta)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field==t){l=!0;break}return l}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(t){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...t,rows:t.last-t.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(t){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(t),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollToVirtualIndex(t)}scrollTo(t){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(t),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollTo(t)}isEmpty(){let t=this.filteredNodes||this.value;return null==t||0==t.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(t){let l=h.p.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=t.pageX-l+this.containerViewChild.nativeElement.scrollLeft,t.preventDefault()}onColumnResize(t){let l=h.p.getOffset(this.containerViewChild.nativeElement).left;h.p.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=t.pageX-l+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(t,l){let n=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=l.offsetWidth,a=r+n;if(r+n>parseInt(l.style.minWidth||15)){if("fit"===this.columnResizeMode){let c=l.nextElementSibling;for(;!c.offsetParent;)c=c.nextElementSibling;if(c){let u=c.offsetWidth-n;if(a>15&&u>parseInt(c.style.minWidth||15))if(this.scrollable){let C=this.findParentScrollableView(l),m=h.p.findSingle(C,".p-treetable-scrollable-body table")||h.p.findSingle(C,".p-scroller-viewport table"),b=h.p.findSingle(C,"table.p-treetable-scrollable-header-table"),p=h.p.findSingle(C,"table.p-treetable-scrollable-footer-table"),T=h.p.index(l);this.resizeColGroup(b,T,a,u),this.resizeColGroup(m,T,a,u),this.resizeColGroup(p,T,a,u)}else l.style.width=a+"px",c&&(c.style.width=u+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let c=this.findParentScrollableView(l),u=h.p.findSingle(c,".p-treetable-scrollable-body")||h.p.findSingle(c,".p-scroller-viewport"),f=h.p.findSingle(c,".p-treetable-scrollable-header"),C=h.p.findSingle(c,".p-treetable-scrollable-footer"),m=h.p.findSingle(c,".p-treetable-scrollable-body table")||h.p.findSingle(c,".p-scroller-viewport table"),b=h.p.findSingle(c,"table.p-treetable-scrollable-header-table"),p=h.p.findSingle(c,"table.p-treetable-scrollable-footer-table");m.style.width=m.offsetWidth+n+"px",b.style.width=b.offsetWidth+n+"px",p&&(p.style.width=p.offsetWidth+n+"px");let T=h.p.index(l);const S=l?m.offsetWidth+n:a,k=l?b.offsetWidth+n:a,D=this.containerViewChild.nativeElement.offsetWidth>=S;let L=(W,$,X,Ni)=>{W&&$&&(W.style.width=Ni?X+h.p.calculateScrollbarWidth(u)+"px":"auto",$.style.width=X+"px")};L(u,m,S,D),L(f,b,k,D),L(C,p,k,D),this.resizeColGroup(b,T,a,null),this.resizeColGroup(m,T,a,null),this.resizeColGroup(p,T,a,null)}else this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+n+"px",l.style.width=a+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px";this.onColResize.emit({element:l,delta:n})}this.resizeHelperViewChild.nativeElement.style.display="none",h.p.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}findParentScrollableView(t){if(t){let l=t.parentElement;for(;l&&!h.p.hasClass(l,"p-treetable-scrollable-view");)l=l.parentElement;return l}return null}resizeColGroup(t,l,n,r){if(t){let a="COLGROUP"===t.children[0].nodeName?t.children[0]:null;if(!a)throw"Scrollable tables require a colgroup to support resizable columns";{let s=a.children[l],c=s.nextElementSibling;s.style.width=n+"px",c&&r&&(c.style.width=r+"px")}}}onColumnDragStart(t,l){this.reorderIconWidth=h.p.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=h.p.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=l,t.dataTransfer.setData("text","b")}onColumnDragEnter(t,l){if(this.reorderableColumns&&this.draggedColumn&&l){t.preventDefault();let n=h.p.getOffset(this.containerViewChild.nativeElement),r=h.p.getOffset(l);if(this.draggedColumn!=l){let a=r.left-n.left,c=r.left+l.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=r.top-n.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=r.top-n.top+l.offsetHeight+"px",t.pageX>c?(this.reorderIndicatorUpViewChild.nativeElement.style.left=a+l.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a+l.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else t.dataTransfer.dropEffect="none"}}onColumnDragLeave(t){this.reorderableColumns&&this.draggedColumn&&(t.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(t,l){if(t.preventDefault(),this.draggedColumn){let n=h.p.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),r=h.p.indexWithinGroup(l,"ttreorderablecolumn"),a=n!=r;a&&(r-n==1&&-1===this.dropPosition||n-r==1&&1===this.dropPosition)&&(a=!1),a&&r<n&&1===this.dropPosition&&(r+=1),a&&r>n&&-1===this.dropPosition&&(r-=1),a&&(v.gb.reorderArray(this.columns,n,r),this.onColReorder.emit({dragIndex:n,dropIndex:r,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(t){let l=t.originalEvent.target.nodeName;if("INPUT"!=l&&"BUTTON"!=l&&"A"!=l&&!h.p.hasClass(t.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let n=t.rowNode,r=this.isSelected(n.node),a=!this.rowTouched&&this.metaKeySelection,s=this.dataKey?String(v.gb.resolveFieldData(n.node.data,this.dataKey)):null;if(a){let c=t.originalEvent.metaKey||t.originalEvent.ctrlKey;if(r&&c){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let u=this.findIndexInSelection(n.node);this._selection=this.selection.filter((f,C)=>C!=u),this.selectionChange.emit(this.selection),s&&delete this.selectionKeys[s]}this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=n.node,this.selectionChange.emit(n.node),s&&(this.selectionKeys={},this.selectionKeys[s]=1)):this.isMultipleSelectionMode()&&(c?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,n.node],this.selectionChange.emit(this.selection),s&&(this.selectionKeys[s]=1)),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex})}else if("single"===this.selectionMode)r?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"})):(this._selection=n.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex}),s&&(this.selectionKeys={},this.selectionKeys[s]=1));else if("multiple"===this.selectionMode)if(r){let c=this.findIndexInSelection(n.node);this._selection=this.selection.filter((u,f)=>f!=c),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"}),s&&delete this.selectionKeys[s]}else this._selection=this.selection?[...this.selection,n.node]:[n.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex}),s&&(this.selectionKeys[s]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(t){this.rowTouched=!0}handleRowRightClick(t){if(this.contextMenu){const l=t.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=l,this.contextMenuSelectionChange.emit(l),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,node:l}),this.contextMenu.show(t.originalEvent),this.tableService.onContextMenu(l);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let n=this.isSelected(l),r=this.dataKey?String(v.gb.resolveFieldData(l.data,this.dataKey)):null;n||(this.isSingleSelectionMode()?(this.selection=l,this.selectionChange.emit(l)):this.isMultipleSelectionMode()&&(this.selection=[l],this.selectionChange.emit(this.selection)),r&&(this.selectionKeys[r]=1)),this.contextMenu.show(t.originalEvent),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,node:l})}}}toggleNodeWithCheckbox(t){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let l=t.rowNode.node;this.isSelected(l)?(this.propagateSelectionDown(l,!1),t.rowNode.parent&&this.propagateSelectionUp(l.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t,node:l})):(this.propagateSelectionDown(l,!0),t.rowNode.parent&&this.propagateSelectionUp(l.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t,node:l})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(t,l){let n=this.filteredNodes||this.value;if(this._selection=l&&n?n.slice():[],l){if(n&&n.length)for(let r of n)this.propagateSelectionDown(r,!0)}else this._selection=[],this.selectionKeys={};this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:t,checked:l})}propagateSelectionUp(t,l){if(t.children&&t.children.length){let r=0,a=!1,s=this.dataKey?String(v.gb.resolveFieldData(t.data,this.dataKey)):null;for(let c of t.children)this.isSelected(c)?r++:c.partialSelected&&(a=!0);if(l&&r==t.children.length)this._selection=[...this.selection||[],t],t.partialSelected=!1,s&&(this.selectionKeys[s]=1);else{if(!l){let c=this.findIndexInSelection(t);c>=0&&(this._selection=this.selection.filter((u,f)=>f!=c),s&&delete this.selectionKeys[s])}t.partialSelected=!!(a||r>0&&r!=t.children.length)}}let n=t.parent;n&&this.propagateSelectionUp(n,l)}propagateSelectionDown(t,l){let n=this.findIndexInSelection(t),r=this.dataKey?String(v.gb.resolveFieldData(t.data,this.dataKey)):null;if(l&&-1==n?(this._selection=[...this.selection||[],t],r&&(this.selectionKeys[r]=1)):!l&&n>-1&&(this._selection=this.selection.filter((a,s)=>s!=n),r&&delete this.selectionKeys[r]),t.partialSelected=!1,t.children&&t.children.length)for(let a of t.children)this.propagateSelectionDown(a,l)}isSelected(t){return!(!t||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[v.gb.resolveFieldData(t.data,this.dataKey)]:Array.isArray(this.selection)?this.findIndexInSelection(t)>-1:this.equals(t,this.selection))}findIndexInSelection(t){let l=-1;if(this.selection&&this.selection.length)for(let n=0;n<this.selection.length;n++)if(this.equals(t,this.selection[n])){l=n;break}return l}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(t,l){return"equals"===this.compareSelectionBy?t===l:v.gb.equals(t.data,l.data,this.dataKey)}filter(t,l,n){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(t)?this.filters[l]&&delete this.filters[l]:this.filters[l]={value:t,matchMode:n},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(t,l){this.filter(t,"global",l)}isFilterBlank(t){return null==t||!!("string"==typeof t&&0==t.trim().length||Array.isArray(t)&&0==t.length)}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let l;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");l=this.globalFilterFields||this.columns}this.filteredNodes=[];const n="strict"===this.filterMode;let r=!1;for(let a of this.value){let f,s={...a},c=!0,u=!1;for(let m in this.filters)if(this.filters.hasOwnProperty(m)&&"global"!==m){let b=this.filters[m];if(f={filterField:m,filterValue:b.value,filterConstraint:this.filterService.filters[b.matchMode||"startsWith"],isStrictMode:n},(n&&!(this.findFilteredNodes(s,f)||this.isFilterMatched(s,f))||!n&&!(this.isFilterMatched(s,f)||this.findFilteredNodes(s,f)))&&(c=!1),!c)break}if(this.filters.global&&!u&&l)for(let m=0;m<l.length;m++){let b={...s};f={filterField:l[m].field||l[m],filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:n},(n&&(this.findFilteredNodes(b,f)||this.isFilterMatched(b,f))||!n&&(this.isFilterMatched(b,f)||this.findFilteredNodes(b,f)))&&(u=!0,s=b)}let C=c;this.filters.global&&(C=c&&u),C&&this.filteredNodes.push(s),r=r||!c||u||c&&this.filteredNodes.length>0||!u&&0===this.filteredNodes.length}r||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.first=0;const t=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:t}),this.tableService.onUIUpdate(t),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(t,l){if(t){let n=!1;if(t.children){let r=[...t.children];t.children=[];for(let a of r){let s={...a};this.isFilterMatched(s,l)&&(n=!0,t.children.push(s))}}if(n)return!0}}isFilterMatched(t,{filterField:l,filterValue:n,filterConstraint:r,isStrictMode:a}){let s=!1;return r(v.gb.resolveFieldData(t.data,l),n,this.filterLocale)&&(s=!0),(!s||a&&!this.isNodeLeaf(t))&&(s=this.findFilteredNodes(t,{filterField:l,filterValue:n,filterConstraint:r,isStrictMode:a})||s),s}isNodeLeaf(t){return!1!==t.leaf&&!(t.children&&t.children.length)}hasFilter(){let t=!0;for(let l in this.filters)if(this.filters.hasOwnProperty(l)){t=!1;break}return!t}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(t,l,n){this.editingCell=t,this.editingCellData=l,this.editingCellField=n,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===h.p.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",t=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(h.p.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.K0),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(M),e.Y36(x.iZ))},i.\u0275cmp=e.Xpm({type:i,selectors:[["p-treeTable"]],contentQueries:function(t,l,n){if(1&t&&e.Suo(n,x.jx,4),2&t){let r;e.iGM(r=e.CRH())&&(l.templates=r)}},viewQuery:function(t,l){if(1&t&&(e.Gf(pe,5),e.Gf(ue,5),e.Gf(fe,5),e.Gf(ge,5),e.Gf(me,5),e.Gf(be,5),e.Gf(Te,5)),2&t){let n;e.iGM(n=e.CRH())&&(l.containerViewChild=n.first),e.iGM(n=e.CRH())&&(l.resizeHelperViewChild=n.first),e.iGM(n=e.CRH())&&(l.reorderIndicatorUpViewChild=n.first),e.iGM(n=e.CRH())&&(l.reorderIndicatorDownViewChild=n.first),e.iGM(n=e.CRH())&&(l.tableViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollableViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollableFrozenViewChild=n.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:"autoLayout",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",paginator:"paginator",rows:"rows",first:"first",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",customSort:"customSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",compareSelectionBy:"compareSelectionBy",rowHover:"rowHover",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterMode:"filterMode",filterLocale:"filterLocale",virtualRowHeight:"virtualRowHeight",value:"value",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel"},features:[e._Bn([M]),e.TTD],decls:12,vars:20,consts:[["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["container",""],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","p-treetable-reorder-indicator-up","style","display: none;",4,"ngIf"],["class","p-treetable-reorder-indicator-down","style","display: none;",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-treetable-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-treetable-loading-icon"],[4,"ngTemplateOutlet"],[1,"p-treetable-header"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],[1,"p-treetable-wrapper"],[3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],[1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],["scrollableView",""],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["scrollableFrozenView",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"p-treetable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"p-treetable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(t,l){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,ye,4,2,"div",2),e.YNc(3,Ee,2,1,"div",3),e.YNc(4,Fe,5,15,"p-paginator",4),e.YNc(5,Pe,9,16,"div",5),e.YNc(6,Je,4,8,"div",6),e.YNc(7,Xe,5,15,"p-paginator",7),e.YNc(8,tt,2,1,"div",8),e.YNc(9,it,2,0,"div",9),e.YNc(10,rt,4,2,"span",10),e.YNc(11,dt,4,2,"span",11),e.qZA()),2&t&&(e.Tol(l.styleClass),e.Q6J("ngStyle",l.style)("ngClass",e.qbA(14,ht,l.rowHover||"single"===l.selectionMode||"multiple"===l.selectionMode,l.autoLayout,l.resizableColumns,l.resizableColumns&&"fit"===l.columnResizeMode,l.scrollable&&"flex"===l.scrollHeight)),e.xp6(2),e.Q6J("ngIf",l.loading&&l.showLoader),e.xp6(1),e.Q6J("ngIf",l.captionTemplate),e.xp6(1),e.Q6J("ngIf",l.paginator&&("top"===l.paginatorPosition||"both"==l.paginatorPosition)),e.xp6(1),e.Q6J("ngIf",!l.scrollable),e.xp6(1),e.Q6J("ngIf",l.scrollable),e.xp6(1),e.Q6J("ngIf",l.paginator&&("bottom"===l.paginatorPosition||"both"==l.paginatorPosition)),e.xp6(1),e.Q6J("ngIf",l.summaryTemplate),e.xp6(1),e.Q6J("ngIf",l.resizableColumns),e.xp6(1),e.Q6J("ngIf",l.reorderableColumns),e.xp6(1),e.Q6J("ngIf",l.reorderableColumns))},dependencies:function(){return[g.mk,g.O5,g.tP,g.PC,P.D,x.jx,Q.L,U.v,J.H,mi,K]},styles:[".p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),K=(()=>{class i{constructor(t,l,n){this.tt=t,this.treeTableService=l,this.cd=n,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(t,l){return this.tt.virtualScroll&&(l=l||this.scrollerOptions)?l[t]:null}getRowIndex(t){const l=this.getScrollerOption("getItemOptions");return l?l(t).index:t}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E),e.Y36(M),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTreeTableBody","columns"],template:["pTreeTableBodyTemplate","template"],frozen:"frozen",serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},attrs:pt,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(e.YNc(0,mt,1,1,"ng-template",0),e.YNc(1,_t,2,5,"ng-container",1)),2&t&&(e.Q6J("ngForOf",l.serializedNodes||l.tt.serializedValue)("ngForTrackBy",l.tt.rowTrackBy),e.xp6(1),e.Q6J("ngIf",l.tt.isEmpty()))},dependencies:[g.sg,g.O5,g.tP],encapsulation:2}),i})(),mi=(()=>{class i{constructor(t,l,n,r,a){this.platformId=t,this.renderer=l,this.tt=n,this.el=r,this.zone=a}get scrollHeight(){return this._scrollHeight}set scrollHeight(t){this._scrollHeight=t,null!=t&&(t.includes("%")||t.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}ngAfterViewInit(){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=h.p.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&h.p.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let t=this.el.nativeElement.previousElementSibling;t&&(this.frozenSiblingBody=h.p.findSingle(t,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let l=h.p.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=l+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=l+"px")}this.bindEvents()}bindEvents(){(0,g.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.renderer.listen(this.scrollHeaderBoxViewChild.nativeElement,"scroll",this.onHeaderScroll.bind(this))),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.renderer.listen(this.scrollFooterViewChild.nativeElement,"scroll",this.onFooterScroll.bind(this))),this.frozen||(this.bodyScrollListener=this.renderer.listen(this.tt.virtualScroll?this.scroller.getElementRef().nativeElement:this.scrollBodyViewChild.nativeElement,"scroll",this.onBodyScroll.bind(this)))})}unbindEvents(){(0,g.NF)(this.platformId)&&(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.headerScrollListener&&(this.headerScrollListener(),this.headerScrollListener=null),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.footerScrollListener&&(this.footerScrollListener(),this.footerScrollListener=null),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null),this.scroller&&this.scroller.getElementRef()&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null))}onHeaderScroll(){const t=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=t,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=t),this.preventBodyScrollPropagation=!0}onFooterScroll(){const t=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=t,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=t),this.preventBodyScrollPropagation=!0}onBodyScroll(t){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*t.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*t.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=t.target.scrollTop))}scrollToVirtualIndex(t){this.scroller&&this.scroller.scrollToIndex(t)}scrollTo(t){this.scroller?this.scroller.scrollTo(t):this.scrollBodyViewChild.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(t):(this.scrollBodyViewChild.nativeElement.scrollLeft=t.left,this.scrollBodyViewChild.nativeElement.scrollTop=t.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(E),e.Y36(e.SBq),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(t,l){if(1&t&&(e.Gf(vt,5),e.Gf(Ct,5),e.Gf(wt,5),e.Gf(xt,5),e.Gf(St,5),e.Gf(yt,5),e.Gf(It,5),e.Gf(Et,5),e.Gf(kt,5)),2&t){let n;e.iGM(n=e.CRH())&&(l.scrollHeaderViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollHeaderBoxViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollBodyViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollTableViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollLoadingTableViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollFooterViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollFooterBoxViewChild=n.first),e.iGM(n=e.CRH())&&(l.scrollableAlignerViewChild=n.first),e.iGM(n=e.CRH())&&(l.scroller=n.first)}},hostAttrs:[1,"p-element"],inputs:{columns:["ttScrollableView","columns"],frozen:"frozen",scrollHeight:"scrollHeight"},attrs:Nt,decls:13,vars:13,consts:[[1,"p-treetable-scrollable-header"],["scrollHeader",""],[1,"p-treetable-scrollable-header-box"],["scrollHeaderBox",""],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"items","scrollHeight","itemSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],["style","background-color:transparent",4,"ngIf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"p-treetable-scrollable-footer"],["scrollFooter",""],[1,"p-treetable-scrollable-footer-box"],["scrollFooterBox",""],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"p-treetable-tfoot"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2,3)(4,"table",4),e.YNc(5,Mt,1,0,"ng-container",5),e.TgZ(6,"thead",6),e.YNc(7,Dt,1,0,"ng-container",5),e.qZA()()()(),e.YNc(8,Vt,4,10,"p-scroller",7),e.YNc(9,Ut,4,10,"ng-container",8),e.YNc(10,Qt,5,15,"ng-template",null,9,e.W1O),e.YNc(12,jt,8,10,"div",10)),2&t&&(e.xp6(4),e.Q6J("ngClass",l.tt.tableStyleClass)("ngStyle",l.tt.tableStyle),e.xp6(1),e.Q6J("ngTemplateOutlet",l.frozen&&l.tt.frozenColGroupTemplate||l.tt.colGroupTemplate)("ngTemplateOutletContext",e.VKq(9,w,l.columns)),e.xp6(2),e.Q6J("ngTemplateOutlet",l.frozen&&l.tt.frozenHeaderTemplate||l.tt.headerTemplate)("ngTemplateOutletContext",e.VKq(11,w,l.columns)),e.xp6(1),e.Q6J("ngIf",l.tt.virtualScroll),e.xp6(1),e.Q6J("ngIf",!l.tt.virtualScroll),e.xp6(3),e.Q6J("ngIf",l.tt.footerTemplate))},dependencies:[g.mk,g.O5,g.tP,g.PC,x.jx,N.T,K],encapsulation:2}),i})(),bi=(()=>{class i{constructor(t){this.tt=t}onClick(t){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:t,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:t,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E))},i.\u0275cmp=e.Xpm({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:3,vars:9,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,l){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(r){return l.onClick(r)}),e.YNc(1,ui,3,2,"ng-container",1),e.YNc(2,gi,1,0,null,2),e.qZA()),2&t&&(e.Udp("visibility",!1===l.rowNode.node.leaf||l.rowNode.node.children&&l.rowNode.node.children.length?"visible":"hidden")("margin-left",16*l.rowNode.level+"px"),e.xp6(1),e.Q6J("ngIf",!l.tt.togglerIconTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",l.tt.togglerIconTemplate)("ngTemplateOutletContext",e.VKq(7,w,l.rowNode.node.expanded)))},dependencies:function(){return[g.O5,g.tP,B.H,Y.v,Z.X]},encapsulation:2}),i})(),Ti=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,P.U,B.T,N.v,Q.L,U.v,J.H,de.V,he.m,re.W,ae.n,ce,Y.v,Z.X,x.m8,N.v]}),i})();function _i(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"i",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearField("chartOfAccountName"))}),e.qZA()}}function vi(i,o){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Head Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Head Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Opening Balance"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Balance"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Action"),e.qZA()())}function Ci(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-treeTableToggler",22),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td",23)(11,"i",24),e.NdJ("click",function(){const r=e.CHM(t).rowData,a=e.oxw();return e.KtG(a.editChartOfAccount(r))}),e.qZA(),e.TgZ(12,"i",25),e.NdJ("click",function(){const r=e.CHM(t).rowData,a=e.oxw();return e.KtG(a.confirmdeleteChartOfAccount(r))}),e.qZA()()()}if(2&i){const t=o.$implicit,l=o.rowData;e.xp6(2),e.Q6J("rowNode",t),e.xp6(1),e.hij(" ",l.headCode," "),e.xp6(2),e.Oqu(l.headName),e.xp6(2),e.Oqu(l.openingBalance),e.xp6(2),e.Oqu(l.balance)}}const wi=function(){return{"min-width":"50rem"}};let xi=(()=>{const o=class{constructor(l,n,r,a,s){this.formBuilder=l,this.router=n,this.chartOfAccountService=r,this.toast=a,this.confirmationService=s,this.chartOfAccountList=[],this.page=1,this.itemsPerPage=10,this.chartOfAccountName="",this.filteredList=[],this.treeData=[]}ngOnInit(){this.headervalue="Chart Of Account",this.chartOfAccountService.getChartOfAccount().subscribe(l=>{this.chartOfAccountList=l,this.treeData=this.buildTree(this.chartOfAccountList)})}buildTree(l){l.sort((a,s)=>a.headCode.toString().length-s.headCode.toString().length);const n={},r=[];return l.forEach(a=>{const s=a.headCode.toString();if(n[s]={data:{headCode:a.headCode,headName:a.headName,openingBalance:a.openingBalance??0,balance:a.balance??0,id:a.id},children:[]},1===s.length)r.push(n[s]);else{const c=Object.keys(n).filter(u=>s.startsWith(u)&&u!==s).reduce((u,f)=>u.length>f.length?u:f,"");c&&n[c].children?.push(n[s])}}),r}createChartOfAccount(){this.router.navigateByUrl("financial/coa/create")}editChartOfAccount(l){this.router.navigateByUrl(`financial/coa/edit/${l.id}`)}deleteChartOfAccount(l){this.chartOfAccountService.deleteChartOfAccount(l.id).subscribe(n=>{this.toast.showSuccess("Chart Of Account Details deleted successfully"),this.ngOnInit()})}filterChartOfAccount(){this.filteredList=this.buildTree(this.chartOfAccountList),this.chartOfAccountName&&(this.filteredList=this.filteredList.filter(l=>!this.chartOfAccountName||l.data.headName.toLowerCase().includes(this.chartOfAccountName.toLowerCase())||l.children?.some(n=>n.data.headName.toLowerCase().includes(this.chartOfAccountName.toLowerCase())||n.children?.some(r=>r.data.headName.toLowerCase().includes(this.chartOfAccountName.toLowerCase()))))),this.treeData=this.filteredList,this.page=1}clearField(l){"chartOfAccountName"===l&&(this.chartOfAccountName=""),this.treeData=this.buildTree(this.chartOfAccountList)}confirmdeleteChartOfAccount(l){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteChartOfAccount(l)},reject:()=>{}})}};let i=o;return o.\u0275fac=function(n){return new(n||o)(e.Y36(_.qu),e.Y36(y.F0),e.Y36(A.e),e.Y36(V.k),e.Y36(x.YP))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-coa-list"]],features:[e._Bn([x.YP,x.ez])],decls:26,vars:6,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Chart Of Account","readonly","",2,"width","200px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[2,"max-width","100%","overflow-x","auto"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[3,"rowNode"],[2,"padding-left","20px"],[1,"fas","fa-pen",2,"color","#05a743","margin-right","15px","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"h5",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"i",5),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(s){return r.chartOfAccountName=s})("input",function(){return r.filterChartOfAccount()}),e.qZA(),e.YNc(8,_i,1,0,"i",7),e.qZA(),e.TgZ(9,"div",8),e._UZ(10,"i",9),e.TgZ(11,"input",10),e.NdJ("click",function(){return r.createChartOfAccount()}),e.qZA()(),e.TgZ(12,"div",11),e._UZ(13,"i",12)(14,"input",13),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"i",14)(17,"input",13),e.qZA()()(),e.TgZ(18,"div",15)(19,"p-treeTable",16),e.YNc(20,vi,11,0,"ng-template",17),e.YNc(21,Ci,13,5,"ng-template",18),e.qZA()(),e.TgZ(22,"div",19)(23,"pagination-controls",20),e.NdJ("pageChange",function(s){return r.page=s}),e.qZA()()(),e._UZ(24,"p-confirmDialog")(25,"p-toast")),2&n&&(e.xp6(1),e.Oqu(r.headervalue),e.xp6(6),e.Q6J("ngModel",r.chartOfAccountName),e.xp6(1),e.Q6J("ngIf",r.chartOfAccountName),e.xp6(11),e.Q6J("value",r.treeData)("tableStyle",e.DdM(5,wi)))},dependencies:[g.O5,_.Fj,_.JJ,_.On,O.LS,x.jx,F.Q,H.FN,E,bi],styles:[".p-treetable thead th{background-color:#2199e8!important;color:#fff!important;font-weight:700}"]}),i})();var Si=d(6625),j=d(3608);function yi(i,o){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("title",t.label),e.xp6(1),e.Oqu(t.label)}}let q=(()=>{const o=class{constructor(l,n,r,a,s,c){this.fb=l,this.router=n,this.stateService=r,this.toast=a,this.route=s,this.chartOfAccountService=c,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1}ngOnInit(){this.loadAccountHeads(),this.addForm=this.fb.group({headName:[null,_.kI.required],headCode:[{value:null,disabled:!0}],parentHead:[0],pHeadName:[{value:null,disabled:!0}],headLevel:[{value:null,disabled:!0}],headType:[{value:null,disabled:!0}],isTransaction:[!1],isGI:[!1],headCodeName:[null]}),this.route.paramMap.subscribe(l=>{this.chartOfAccountId=parseInt(l.get("id")),this.chartOfAccountId?(this.isEditMode=!0,this.chartOfAccountService.getChartOfAccountById(this.chartOfAccountId).subscribe(n=>{this.addForm=this.fb.group({headName:[n.headName,_.kI.required],headCode:[{value:n.headCode,disabled:!0}],parentHead:[{value:n.parentHead,disabled:!0}],pHeadName:[{value:n.pHeadName,disabled:!0}],headLevel:[{value:n.headLevel,disabled:!0}],headType:[{value:n.headType,disabled:!0}],isTransaction:[n.isTransaction],isGI:[n.isGI],headCodeName:[n.headCodeName]});const r=this.parentHeadList.find(a=>a.value===this.addForm.get("parentHead")?.value);this.selectedParentHeadLabel=r?r.label:""})):this.isEditMode=!1})}loadAccountHeads(){this.chartOfAccountService.getChartOfAccount().subscribe(l=>{this.accountHeads=l,this.parentHeadList=this.accountHeads.map(n=>({value:n.id,label:this.buildFullPath(n)}))})}buildFullPath(l){let n=l.headName,r=this.accountHeads.find(a=>a.id===l.parentHead);for(;r;)n=`${r.headName} >> ${n}`,r=this.accountHeads.find(a=>a.id===r.parentHead);return n}onChangeHeadName(l){this.chartOfAccountService.getChartOfAccount().subscribe(n=>{if(n&&n.length>0){const a=n.filter(s=>1===s.headLevel).length+1;this.addForm.patchValue({headCode:a,pHeadName:"COA",headLevel:1,headType:"A",isTransaction:!1,isGI:!1,headCodeName:null})}else this.addForm.patchValue({headCode:1,pHeadName:"COA",headLevel:1,headType:"A",isTransaction:!1,isGI:!1,headCodeName:null})})}onChangeParentHead(l){const n=this.parentHeadList.find(p=>p.value===l.value);this.selectedParentHeadLabel=n?n.label:"";const r=this.accountHeads.find(p=>p.id===l.value);if(!r)return;const a=null!=r.headCode?String(r.headCode):"",s=Number(r.headLevel),c=this.accountHeads.map(p=>({code:null!=p.headCode?String(p.headCode):"",level:Number(p.headLevel)})).filter(p=>p.code.startsWith(a)&&p.level===s+1).map(p=>p.code),u=c.map(p=>{const T=p.substring(a.length);return parseInt(T,10)||0}).sort((p,T)=>p-T);let f=1;u.length>0&&(f=u[u.length-1]+1);const C=c.reduce((p,T)=>Math.max(p,T.length-a.length),2),m=String(f).padStart(C,"0");this.addForm.patchValue({pHeadName:r.headName,headLevel:r.headLevel+1,headType:r.headType,headCode:a+m})}onSubmit(){const l=this.addForm.getRawValue();l.parentHead=this.addForm.value.parentHead?this.addForm.value.parentHead:0,this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):this.isEditMode?this.chartOfAccountService.updateChartOfAccount(Number(this.chartOfAccountId),l).subscribe(n=>{this.toast.showSuccess("ChartOfAccount Details updated successfully"),this.router.navigateByUrl("financial/coa")},n=>{this.toast.showApiError(n)}):this.chartOfAccountService.insertChartOfAccount(l).subscribe(n=>{this.toast.showSuccess("ChartOfAccount Details saved successfully"),this.router.navigateByUrl("financial/coa")},n=>{this.toast.showApiError(n)})}backButton(){this.router.navigateByUrl("financial/coa")}cancel(){this.router.navigateByUrl("financial/coa")}};let i=o;return o.\u0275fac=function(n){return new(n||o)(e.Y36(_.qu),e.Y36(y.F0),e.Y36(Si.b),e.Y36(V.k),e.Y36(y.gz),e.Y36(A.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-coa-create"]],decls:59,vars:5,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container","d-flex","flex-column",2,"min-height","100%",3,"formGroup"],[1,"flex-grow-1"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],["type","text","formControlName","headName",1,"form-control","small-placeholder",3,"change"],["type","text","formControlName","headCode",1,"form-control","small-placeholder"],[1,"row","mt-3"],[1,"w-100"],["optionLabel","label","optionValue","value","formControlName","parentHead","placeholder","choose Parent Head","styleClass","w-100","appendTo","body",3,"options","showClear","pTooltip","onChange"],["pTemplate","item"],["type","text","formControlName","pHeadName",1,"form-control","small-placeholder"],[1,"col-md-3"],[1,"label",2,"white-space","nowrap"],["type","text","formControlName","headLevel",1,"form-control","small-placeholder"],["type","text","formControlName","headType",1,"form-control","small-placeholder"],["type","checkbox","formControlName","isTransaction"],["type","checkbox","formControlName","isGI"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"],[3,"title"]],template:function(n,r){1&n&&(e.TgZ(0,"h5",0)(1,"i",1),e.NdJ("click",function(){return r.backButton()}),e.qZA(),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"Head Name "),e.TgZ(12,"span",10),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"input",11),e.NdJ("change",function(s){return r.onChangeHeadName(s)}),e.qZA()()(),e.TgZ(15,"div",7)(16,"div",8)(17,"label",9),e._uU(18,"Head Code"),e.qZA(),e._UZ(19,"input",12),e.qZA()()(),e.TgZ(20,"div",13)(21,"div",7)(22,"div",8)(23,"label",9),e._uU(24,"Parent Head"),e.qZA(),e.TgZ(25,"div",14)(26,"p-dropdown",15),e.NdJ("onChange",function(s){return r.onChangeParentHead(s)}),e.YNc(27,yi,2,2,"ng-template",16),e.qZA()()()(),e.TgZ(28,"div",7)(29,"div",8)(30,"label",9),e._uU(31,"P Head Name"),e.qZA(),e._UZ(32,"input",17),e.qZA()()(),e.TgZ(33,"div",13)(34,"div",18)(35,"div",8)(36,"label",19),e._uU(37,"Head Level"),e.qZA(),e._UZ(38,"input",20),e.qZA()(),e.TgZ(39,"div",18)(40,"div",8)(41,"label",19),e._uU(42,"Head Type"),e.qZA(),e._UZ(43,"input",21),e.qZA()(),e.TgZ(44,"div",18)(45,"div",8)(46,"label",19),e._uU(47,"Is Transaction"),e.qZA(),e._UZ(48,"input",22),e.qZA()(),e.TgZ(49,"div",18)(50,"div",8)(51,"label",19),e._uU(52,"Is GI"),e.qZA(),e._UZ(53,"input",23),e.qZA()()()()(),e.TgZ(54,"div",24)(55,"button",25),e.NdJ("click",function(){return r.cancel()}),e._uU(56,"Cancel"),e.qZA(),e.TgZ(57,"button",26),e.NdJ("click",function(){return r.onSubmit()}),e._uU(58,"Save"),e.qZA()()()()),2&n&&(e.xp6(2),e.hij(" ",r.isEditMode?"Edit Chart Of Account":"New Chart Of Account","\n"),e.xp6(2),e.Q6J("formGroup",r.addForm),e.xp6(22),e.Q6J("options",r.parentHeadList)("showClear",!0)("pTooltip",r.selectedParentHeadLabel))},dependencies:[_._Y,_.Fj,_.Wl,_.JJ,_.JL,_.sg,_.u,x.jx,R.Lt,j.u],styles:[".p-dropdown{min-width:200px!important;max-width:320px!important}"]}),i})();const Ii=[{path:"",component:xi},{path:"create",component:q},{path:"edit/:id",component:q}];let Ei=(()=>{const o=class{};let i=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(Ii),y.Bz]}),i})(),ki=(()=>{const o=class{};let i=o;return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,Ei,_.UX,_.u5,ee.JF,O.JX,te.U$,ie.S,le.hJ,ne.j,R.kW,oe._8,F.D,H.EV,Ti,j.z]}),i})()}}]);