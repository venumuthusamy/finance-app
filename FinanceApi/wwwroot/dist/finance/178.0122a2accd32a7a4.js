"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[178],{6178:(D,g,n)=>{n.r(g),n.d(g,{WarehouseModule:()=>B});var d=n(6895),p=n(4333),a=n(433),f=n(529),w=n(3144),I=n(5839),A=n(5593),W=n(1740),Z=n(4401),N=n(2688),y=n(2137),v=n(3887),u=n(9965),m=n(805),e=n(8256),b=n(2340);let C=(()=>{const i=class{constructor(t){this.http=t,this.url=b.N.apiUrl,this.baseUrl=this.url+"/warehouse/"}getWarehouse(){return this.http.get(this.baseUrl+"getAll")}getWarehouseById(t){return this.http.get(this.baseUrl+"get/"+t)}insertWarehouse(t){return this.http.post(`${this.baseUrl}insert`,t)}updateWarehouse(t,s){return this.http.put(this.baseUrl+"update/"+t,s)}deleteWarehouse(t){return this.http.delete(`${this.baseUrl}delete/`+t)}};let o=i;return i.\u0275fac=function(s){return new(s||i)(e.LFG(f.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();var T=n(8889);function q(o,i){if(1&o){const h=e.EpF();e.TgZ(0,"i",19),e.NdJ("click",function(){e.CHM(h);const s=e.oxw();return e.KtG(s.clearField("searchWarehouseName"))}),e.qZA()}}function L(o,i){if(1&o){const h=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",20)(16,"i",21),e.NdJ("click",function(){const r=e.CHM(h).$implicit,c=e.oxw();return e.KtG(c.editWarehouse(r))}),e.qZA(),e.TgZ(17,"i",22),e.NdJ("click",function(){const r=e.CHM(h).$implicit,c=e.oxw();return e.KtG(c.confirmdeleteWarehouse(r))}),e.qZA()()()}if(2&o){const h=i.$implicit,t=i.index,s=e.oxw();e.xp6(2),e.Oqu((s.page-1)*s.itemsPerPage+t+1),e.xp6(2),e.Oqu(h.name),e.xp6(2),e.Oqu(h.countryName),e.xp6(2),e.Oqu(h.stateName),e.xp6(2),e.Oqu(h.cityName),e.xp6(2),e.Oqu(h.phone),e.xp6(2),e.Oqu(h.address)}}const x=function(o,i){return{itemsPerPage:o,currentPage:i}};let S=(()=>{const i=class{constructor(t,s,r,c,l){this.formBuilder=t,this.router=s,this.warehouseService=r,this.toast=c,this.confirmationService=l,this.warehouseList=[],this.page=1,this.itemsPerPage=10,this.searchWarehouseName=""}ngOnInit(){this.headervalue="Warehouses",this.warehouseService.getWarehouse().subscribe(t=>{this.warehouseList=t})}createWarehouse(){this.router.navigateByUrl("masters/warehouses/create")}editWarehouse(t){this.router.navigateByUrl(`masters/warehouses/edit/${t.id}`)}deleteWarehouse(t){this.warehouseService.deleteWarehouse(t.id).subscribe(s=>{this.toast.showSuccess("Warehouses Details deleted successfully"),this.ngOnInit()})}filterWarehouse(){this.warehouseService.getWarehouse().subscribe(t=>{this.filteredList=t,this.searchWarehouseName&&(this.filteredList=this.filteredList?.filter(s=>!this.searchWarehouseName||s.name.toLowerCase().includes(this.searchWarehouseName.toLowerCase()))),this.warehouseList=this.filteredList,this.page=1})}clearField(t){"searchWarehouseName"===t&&(this.searchWarehouseName=""),this.filterWarehouse()}confirmdeleteWarehouse(t){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteWarehouse(t)},reject:()=>{}})}};let o=i;return i.\u0275fac=function(s){return new(s||i)(e.Y36(a.qu),e.Y36(u.F0),e.Y36(C),e.Y36(T.k),e.Y36(m.YP))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-warehouses-list"]],features:[e._Bn([m.YP,m.ez])],decls:45,vars:10,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Warehouses","readonly","",2,"width","180px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[2,"max-width","100%","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[2,"padding-left","20px"],[1,"fas","fa-pen",2,"color","#05a743","margin-right","15px","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer",3,"click"]],template:function(s,r){1&s&&(e.TgZ(0,"h5",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"i",5),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(l){return r.searchWarehouseName=l})("input",function(){return r.filterWarehouse()}),e.qZA(),e.YNc(8,q,1,0,"i",7),e.qZA(),e.TgZ(9,"div",8),e._UZ(10,"i",9),e.TgZ(11,"input",10),e.NdJ("click",function(){return r.createWarehouse()}),e.qZA()(),e.TgZ(12,"div",11),e._UZ(13,"i",12)(14,"input",13),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"i",14)(17,"input",13),e.qZA()()(),e.TgZ(18,"div",15)(19,"table")(20,"thead")(21,"tr")(22,"th"),e._uU(23,"ID"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Warehouse Name"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Country Name"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"State Name"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"City Name"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Phone"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Address"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Action"),e.qZA()()(),e.TgZ(38,"tbody"),e.YNc(39,L,18,7,"tr",16),e.ALo(40,"paginate"),e.qZA()()(),e.TgZ(41,"div",17)(42,"pagination-controls",18),e.NdJ("pageChange",function(l){return r.page=l}),e.qZA()()(),e._UZ(43,"p-confirmDialog")(44,"p-toast")),2&s&&(e.xp6(1),e.Oqu(r.headervalue),e.xp6(6),e.Q6J("ngModel",r.searchWarehouseName),e.xp6(1),e.Q6J("ngIf",r.searchWarehouseName),e.xp6(31),e.Q6J("ngForOf",e.xi3(40,4,r.warehouseList,e.WLB(7,x,r.itemsPerPage,r.page))))},dependencies:[d.sg,d.O5,a.Fj,a.JJ,a.On,p.LS,y.Q,v.FN,p._s]}),o})();var F=n(6625),J=n(2669),_=n(8102);let U=(()=>{const i=class{constructor(t,s,r,c,l,O,P,M){this.fb=t,this.router=s,this.stateService=r,this.toast=c,this.route=l,this.countryService=O,this.warehouseService=P,this.cityService=M,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1}ngOnInit(){this.addForm=this.fb.group({name:[null,a.kI.required],countryId:[null,a.kI.required],stateId:[null,a.kI.required],cityId:[null,a.kI.required],address:[null],phone:[null,a.kI.required],description:[null]}),this.getCountry(),this.getState(),this.getCity(),this.route.paramMap.subscribe(t=>{this.warehouseId=parseInt(t.get("id")),this.warehouseId?(this.isEditMode=!0,this.warehouseService.getWarehouseById(this.warehouseId).subscribe(s=>{this.addForm=this.fb.group({name:[s.name,a.kI.required],countryId:[s.countryId,a.kI.required],stateId:[s.stateId,a.kI.required],cityId:[s.cityId,a.kI.required],phone:[s.phone,a.kI.required],address:[s.address],description:[s.description]}),this.onCountryChange({value:s.countryId,stateId:s.stateId},!0),this.onStateChange({value:s.stateId,cityId:s.cityId},!0)})):this.isEditMode=!1})}getCountry(){this.countryService.getCountry().subscribe(t=>{this.countryList=t})}getState(){this.stateService.getState().subscribe(t=>{this.stateList=t})}getCity(){this.cityService.getCity().subscribe(t=>{this.cityList=t})}onCountryChange(t,s=!1){if(this.cityUpdatedList=[],this.stateUpdatedList=this.stateList?.filter(r=>r.countryId===t.value),s){const r=this.stateUpdatedList?.find(c=>c.stateId===t.stateId);this.addForm.patchValue({stateId:r?.stateId})}else this.addForm.patchValue({stateId:null,cityId:null})}onStateChange(t,s=!1){if(this.cityUpdatedList=this.cityList?.filter(r=>r.stateId===t.value),s){const r=this.cityUpdatedList?.find(c=>c.cityId===t.cityId);this.addForm.patchValue({cityId:r?.cityId})}else this.addForm.patchValue({cityId:null})}onSubmit(){const t=this.addForm.getRawValue();this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):this.isEditMode?this.warehouseService.updateWarehouse(Number(this.warehouseId),t).subscribe(s=>{this.toast.showSuccess("Warehouses Details updated successfully"),this.router.navigateByUrl("masters/warehouses")},s=>{this.toast.showApiError(s)}):this.warehouseService.insertWarehouse(t).subscribe(s=>{this.toast.showSuccess("Warehouses Details saved successfully"),this.router.navigateByUrl("masters/warehouses")},s=>{this.toast.showApiError(s)})}allowOnlyNumbers(t){/[0-9.]/.test(t.key)||t.preventDefault()}backButton(){this.router.navigateByUrl("masters/warehouses")}cancel(){this.router.navigateByUrl("masters/warehouses")}};let o=i;return i.\u0275fac=function(s){return new(s||i)(e.Y36(a.qu),e.Y36(u.F0),e.Y36(F.b),e.Y36(T.k),e.Y36(u.gz),e.Y36(J.T),e.Y36(C),e.Y36(_.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-warehouses-create"]],decls:65,vars:8,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container","d-flex","flex-column",2,"min-height","100%",3,"formGroup"],[1,"flex-grow-1"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],["type","text","formControlName","name",1,"form-control","small-placeholder"],[1,"w-100"],["optionLabel","countryName","optionValue","id","formControlName","countryId","placeholder","choose country","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],[1,"row","mt-3"],["optionLabel","stateName","optionValue","stateId","formControlName","stateId","placeholder","choose state","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],["optionLabel","cityName","optionValue","cityId","formControlName","cityId","placeholder","choose city","styleClass","w-100","appendTo","body",3,"options","showClear"],["type","text","formControlName","phone",1,"form-control","small-placeholder"],[1,"col-sm-12"],["type","text","formControlName","address",1,"form-control","small-placeholder"],["type","text","formControlName","description",1,"form-control","small-placeholder"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(s,r){1&s&&(e.TgZ(0,"h5",0)(1,"i",1),e.NdJ("click",function(){return r.backButton()}),e.qZA(),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"Warehouses Name "),e.TgZ(12,"span",10),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",11),e.qZA()(),e.TgZ(15,"div",7)(16,"div",8)(17,"label",9),e._uU(18,"Country"),e.TgZ(19,"span",10),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"div",12)(22,"p-dropdown",13),e.NdJ("onChange",function(l){return r.onCountryChange(l)}),e.qZA()()()()(),e.TgZ(23,"div",14)(24,"div",7)(25,"div",8)(26,"label",9),e._uU(27,"State"),e.TgZ(28,"span",10),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"div",12)(31,"p-dropdown",15),e.NdJ("onChange",function(l){return r.onStateChange(l)}),e.qZA()()()(),e.TgZ(32,"div",7)(33,"div",8)(34,"label",9),e._uU(35,"City"),e.TgZ(36,"span",10),e._uU(37,"*"),e.qZA()(),e.TgZ(38,"div",12),e._UZ(39,"p-dropdown",16),e.qZA()()()(),e.TgZ(40,"div",14)(41,"div",7)(42,"div",8)(43,"label",9),e._uU(44,"Phone"),e.TgZ(45,"span",10),e._uU(46,"*"),e.qZA()(),e._UZ(47,"input",17),e.qZA()()(),e.TgZ(48,"div",14)(49,"div",18)(50,"div",8)(51,"label",9),e._uU(52,"Address"),e.qZA(),e._UZ(53,"textarea",19),e.qZA()()(),e.TgZ(54,"div",14)(55,"div",18)(56,"div",8)(57,"label",9),e._uU(58,"Description"),e.qZA(),e._UZ(59,"textarea",20),e.qZA()()()()(),e.TgZ(60,"div",21)(61,"button",22),e.NdJ("click",function(){return r.cancel()}),e._uU(62,"Cancel"),e.qZA(),e.TgZ(63,"button",23),e.NdJ("click",function(){return r.onSubmit()}),e._uU(64,"Save"),e.qZA()()()()),2&s&&(e.xp6(2),e.hij(" ",r.isEditMode?"Edit Warehouses":"New Warehouses","\n"),e.xp6(2),e.Q6J("formGroup",r.addForm),e.xp6(18),e.Q6J("options",r.countryList)("showClear",!0),e.xp6(9),e.Q6J("options",r.stateUpdatedList)("showClear",!0),e.xp6(8),e.Q6J("options",r.cityUpdatedList)("showClear",!0))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,Z.Lt]}),o})();const k=[{path:"",component:S},{path:"create",component:U},{path:"edit/:id",component:U}];let Y=(()=>{const i=class{};let o=i;return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(k),u.Bz]}),o})(),B=(()=>{const i=class{};let o=i;return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,Y,a.UX,a.u5,f.JF,p.JX,w.U$,I.S,A.hJ,W.j,Z.kW,N._8,y.D,v.EV]}),o})()}}]);