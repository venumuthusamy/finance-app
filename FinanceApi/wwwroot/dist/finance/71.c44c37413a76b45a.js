"use strict";(self.webpackChunkfinance=self.webpackChunkfinance||[]).push([[71],{71:(O,y,a)=>{a.r(y),a.d(y,{CitiesModule:()=>k});var p=a(6895),u=a(9965),h=a(805),t=a(8256),c=a(433),g=a(8102),f=a(8889),m=a(4333),C=a(2137),v=a(3887);function N(r,s){if(1&r){const d=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(d);const e=t.oxw();return t.KtG(e.clearField("searchCityName"))}),t.qZA()}}function U(r,s){if(1&r){const d=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",20)(10,"i",21),t.NdJ("click",function(){const n=t.CHM(d).$implicit,o=t.oxw();return t.KtG(o.editCity(n))}),t.qZA(),t.TgZ(11,"i",22),t.NdJ("click",function(){const n=t.CHM(d).$implicit,o=t.oxw();return t.KtG(o.confirmdeleteCity(n))}),t.qZA()()()}if(2&r){const d=s.$implicit,i=s.index,e=t.oxw();t.xp6(2),t.Oqu((e.page-1)*e.itemsPerPage+i+1),t.xp6(2),t.Oqu(d.cityName),t.xp6(2),t.Oqu(d.countryName),t.xp6(2),t.Oqu(d.stateName)}}const A=function(r,s){return{itemsPerPage:r,currentPage:s}};let L=(()=>{const s=class{constructor(i,e,n,o,l){this.formBuilder=i,this.router=e,this.cityService=n,this.toast=o,this.confirmationService=l,this.cityList=[],this.page=1,this.itemsPerPage=10,this.searchCityName=""}ngOnInit(){this.headervalue="Cities",this.cityService.getCity().subscribe(i=>{this.cityList=i})}createCity(){this.router.navigateByUrl("masters/city/create")}editCity(i){this.router.navigateByUrl(`masters/city/edit/${i.id}`)}deleteCity(i){this.cityService.deleteCity(i.cityId).subscribe(e=>{this.toast.showSuccess("City Details deleted successfully"),this.ngOnInit()})}filterCity(){this.cityService.getCity().subscribe(i=>{this.filteredList=i,this.searchCityName&&(this.filteredList=this.filteredList.filter(e=>!this.searchCityName||e.cityName.toLowerCase().includes(this.searchCityName.toLowerCase()))),this.cityList=this.filteredList,this.page=1})}clearField(i){"searchCityName"===i&&(this.searchCityName=""),this.filterCity()}confirmdeleteCity(i){this.confirmationService.confirm({header:"Confirm Delete",message:"Are you sure you want to delete this item?",acceptLabel:"Delete",rejectLabel:"Cancel",rejectIcon:"pi pi-times",accept:()=>{this.deleteCity(i)},reject:()=>{}})}};let r=s;return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.qu),t.Y36(u.F0),t.Y36(g.Z),t.Y36(f.k),t.Y36(h.YP))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-city-list"]],features:[t._Bn([h.YP,h.ez])],decls:39,vars:10,consts:[[1,"page-header",2,"color","#2199e8"],[1,"page-content"],[2,"display","flex","flex-direction","row"],[1,"top-action-bar"],[1,"searchtop-container"],[1,"fa","fa-search","search-icon"],["type","text","placeholder","Search...",3,"ngModel","ngModelChange","input"],["class","fa fa-times clear-icon",3,"click",4,"ngIf"],[1,"searchtop-container",2,"margin-left","5px"],[1,"fa","fa-plus","icon",2,"color","#00a65a"],["type","text","placeholder","New Cities","readonly","",2,"width","150px","cursor","pointer",3,"click"],[1,"searchtop-container",2,"margin-left","2px"],[1,"fa","fa-sync","icon",2,"color","#01a1ff"],["type","text","readonly","",2,"width","20px","cursor","pointer"],[1,"fa","fa-columns","icon",2,"color","#01a1ff"],[2,"max-width","100%","overflow-x","auto"],[4,"ngFor","ngForOf"],[2,"margin-top","10px"],[3,"pageChange"],[1,"fa","fa-times","clear-icon",3,"click"],[2,"padding-left","20px"],[1,"fas","fa-pen",2,"color","#05a743","margin-right","15px","cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"color","red","cursor","pointer",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"h5",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"i",5),t.TgZ(7,"input",6),t.NdJ("ngModelChange",function(l){return n.searchCityName=l})("input",function(){return n.filterCity()}),t.qZA(),t.YNc(8,N,1,0,"i",7),t.qZA(),t.TgZ(9,"div",8),t._UZ(10,"i",9),t.TgZ(11,"input",10),t.NdJ("click",function(){return n.createCity()}),t.qZA()(),t.TgZ(12,"div",11),t._UZ(13,"i",12)(14,"input",13),t.qZA(),t.TgZ(15,"div",11),t._UZ(16,"i",14)(17,"input",13),t.qZA()()(),t.TgZ(18,"div",15)(19,"table")(20,"thead")(21,"tr")(22,"th"),t._uU(23,"ID"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"City Name"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Country Name"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"State Name"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Action"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,U,12,4,"tr",16),t.ALo(34,"paginate"),t.qZA()()(),t.TgZ(35,"div",17)(36,"pagination-controls",18),t.NdJ("pageChange",function(l){return n.page=l}),t.qZA()()(),t._UZ(37,"p-confirmDialog")(38,"p-toast")),2&e&&(t.xp6(1),t.Oqu(n.headervalue),t.xp6(6),t.Q6J("ngModel",n.searchCityName),t.xp6(1),t.Q6J("ngIf",n.searchCityName),t.xp6(25),t.Q6J("ngForOf",t.xi3(34,4,n.cityList,t.WLB(7,A,n.itemsPerPage,n.page))))},dependencies:[p.sg,p.O5,c.Fj,c.JJ,c.On,m.LS,C.Q,v.FN,m._s]}),r})();var I=a(2669),x=a(6625),Z=a(4401);let T=(()=>{const s=class{constructor(i,e,n,o,l,M,P,_){this.fb=i,this.router=e,this.cityService=n,this.datePipe=o,this.toast=l,this.route=M,this.countryService=P,this.stateService=_,this.displayDialog=!1,this.dialogMode="add",this.editIndex=null,this.isEditMode=!1,this.stateUpdatedList=[]}ngOnInit(){this.addForm=this.fb.group({cityName:[null,c.kI.required],countryId:[null,c.kI.required],stateId:[null,c.kI.required]}),this.getCountry(),this.getState(),this.route.paramMap.subscribe(i=>{this.cityId=parseInt(i.get("id")),this.cityId?(this.isEditMode=!0,this.cityService.getCityById(this.cityId).subscribe(e=>{this.addForm.patchValue({cityName:e.cityName,countryId:e.countryId}),this.onCountryChange({value:e.countryId,stateId:e.stateId},!0)})):this.isEditMode=!1})}getCountry(){this.countryService.getCountry().subscribe(i=>{this.countryList=i})}getState(){this.stateService.getState().subscribe(i=>{this.stateList=i})}onCountryChange(i,e=!1){if(this.stateUpdatedList=this.stateList.filter(n=>n.countryId===i.value),e){const n=this.stateUpdatedList.find(o=>o.stateId===i.stateId);this.addForm.patchValue({stateId:n.stateId})}else this.addForm.patchValue({stateId:null})}onSubmit(){const i=this.addForm.getRawValue();this.addForm.invalid?this.toast.showWarning("Please Fill Mandatory Field"):this.isEditMode?this.cityService.updateCity(Number(this.cityId),i).subscribe(e=>{this.toast.showSuccess("City updated successfully"),this.router.navigateByUrl("masters/city")},e=>{this.toast.showApiError(e)}):this.cityService.insertCity(i).subscribe(e=>{this.toast.showSuccess("City saved successfully"),this.router.navigateByUrl("masters/city")},e=>{this.toast.showApiError(e)})}backButton(){this.router.navigateByUrl("masters/city")}cancel(){this.router.navigateByUrl("masters/city")}};let r=s;return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.qu),t.Y36(u.F0),t.Y36(g.Z),t.Y36(p.uU),t.Y36(f.k),t.Y36(u.gz),t.Y36(I.T),t.Y36(x.b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-city-create"]],features:[t._Bn([p.uU])],decls:36,vars:6,consts:[[1,"page-header",2,"color","#2199e8"],[1,"fas","fa-arrow-left",2,"padding","0px 25px","cursor","pointer",3,"click"],[1,"page-content-create"],[1,"container",3,"formGroup"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-6"],[1,"form-group","d-flex","align-items-center","gap-2"],[1,"label",2,"white-space","nowrap","min-width","130px"],[2,"color","red"],["type","text","formControlName","cityName",1,"form-control","small-placeholder"],[1,"w-100"],["optionLabel","countryName","optionValue","id","formControlName","countryId","placeholder","choose country","styleClass","w-100","appendTo","body",3,"options","showClear","onChange"],[1,"row","mt-5"],["optionLabel","stateName","optionValue","stateId","formControlName","stateId","placeholder","choose state","styleClass","w-100","appendTo","body",3,"options","showClear"],[1,"text-end","mt-5"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"h5",0)(1,"i",1),t.NdJ("click",function(){return n.backButton()}),t.qZA(),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"City Name "),t.TgZ(11,"span",9),t._uU(12,"*"),t.qZA()(),t._UZ(13,"input",10),t.qZA()(),t.TgZ(14,"div",6)(15,"div",7)(16,"label",8),t._uU(17,"Country "),t.TgZ(18,"span",9),t._uU(19,"*"),t.qZA()(),t.TgZ(20,"div",11)(21,"p-dropdown",12),t.NdJ("onChange",function(l){return n.onCountryChange(l)}),t.qZA()()()()(),t.TgZ(22,"div",13)(23,"div",6)(24,"div",7)(25,"label",8),t._uU(26,"State"),t.TgZ(27,"span",9),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"div",11),t._UZ(30,"p-dropdown",14),t.qZA()()()(),t.TgZ(31,"div",15)(32,"button",16),t.NdJ("click",function(){return n.cancel()}),t._uU(33,"Cancel"),t.qZA(),t.TgZ(34,"button",17),t.NdJ("click",function(){return n.onSubmit()}),t._uU(35,"Save"),t.qZA()()()()()),2&e&&(t.xp6(2),t.hij(" ",n.isEditMode?"Edit Cities":"New Cities","\n"),t.xp6(2),t.Q6J("formGroup",n.addForm),t.xp6(17),t.Q6J("options",n.countryList)("showClear",!0),t.xp6(9),t.Q6J("options",n.stateUpdatedList)("showClear",!0))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z.Lt]}),r})();const b=[{path:"",component:L},{path:"create",component:T},{path:"edit/:id",component:T}];let S=(()=>{const s=class{};let r=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.Bz.forChild(b),u.Bz]}),r})();var F=a(529),J=a(3144),w=a(5839),q=a(5593),Y=a(1740),B=a(2688);let k=(()=>{const s=class{};let r=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,S,c.UX,c.u5,F.JF,m.JX,J.U$,w.S,q.hJ,Y.j,Z.kW,B._8,C.D,v.EV]}),r})()}}]);